<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gabriel I. Cook">
<meta name="dcterms.date" content="2024-09-03">

<title>Data Visualization - Data frame manipulation and wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://kit.fontawesome.com/78ddb093ea.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../css/nav.css">
<link rel="stylesheet" href="../css/styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><strong>Data Visualization</strong></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text"><strong>Home</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../schedule/index.html" rel="" target="" aria-current="page">
 <span class="menu-text"><strong>Schedule</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../modules/index.html" rel="" target="">
 <span class="menu-text"><strong>Modules</strong></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../project/index.html" rel="" target="">
 <span class="menu-text"><strong>Project</strong></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-slides" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Slides</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-slides">    
        <li>
    <a class="dropdown-item" href="../slides/01_intro_rstudio_rmarkdown_slides.html" rel="" target="">
 <span class="dropdown-text">R, RStudio, &amp; R Markdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/02_git_slides.html" rel="" target="">
 <span class="dropdown-text">Git and GitHub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../slides/03_functions_slides.html" rel="" target="">
 <span class="dropdown-text">Functions, Parameters, and Arguments</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hw" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>HW</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hw">    
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw01.Rmd" rel="" target="">
 <span class="dropdown-text">HW 01</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw02.Rmd" rel="" target="">
 <span class="dropdown-text">HW 02</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw03.Rmd" rel="" target="">
 <span class="dropdown-text">HW 03</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw04.Rmd" rel="" target="">
 <span class="dropdown-text">HW 04</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw05.Rmd" rel="" target="">
 <span class="dropdown-text">HW 05</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw06.Rmd" rel="" target="">
 <span class="dropdown-text">HW 06</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw07.Rmd" rel="" target="">
 <span class="dropdown-text">HW 07</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw08.Rmd" rel="" target="">
 <span class="dropdown-text">HW 08</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw09.Rmd" rel="" target="">
 <span class="dropdown-text">HW 09</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://raw.githubusercontent.com/slicesofdata/dataviz24/main/homework/hw10.Rmd" rel="" target="">
 <span class="dropdown-text">HW 10</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Exercises</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises">    
        <li>
    <a class="dropdown-item" href="../exercises/example-project-management-and-git.pdf" rel="" target="">
 <span class="dropdown-text">project-management-and-git.pdf</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../exercises/grouping_and_summarizing_exercise.pdf" rel="" target="">
 <span class="dropdown-text">grouping_and_summarizing_exercise.pdf</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Data</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data">    
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz24/raw/main/data/baby-names-2008.csv" rel="" target="">
 <span class="dropdown-text">baby-names-2008.csv</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz24/raw/main/data/cms-top-all-time-2023-swim.xlsx" rel="" target="">
 <span class="dropdown-text">cms-top-all-time-2023-swim.xlsx (/data/raw)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz24/raw/main/data/cms-top-all-time-2023-swim.csv" rel="" target="">
 <span class="dropdown-text">cms-top-all-time-2023-swim.csv (/data/raw)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/slicesofdata/dataviz24/raw/main/data/cleaned-cms-top-all-time-2023-swim.csv" rel="" target="">
 <span class="dropdown-text">cleaned-cms-top-all-time-2023-swim.csv (/data/processed)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/rfordatascience/tidytuesday" rel="" target="">
 <span class="dropdown-text">Fun Tidy Tuesday Data Sets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://dcas.dmdc.osd.mil/dcas/app/home" rel="" target="">
 <span class="dropdown-text">Defense Casualty Analysis System (DCAS)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-example-files--other" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Example Files &amp; Other</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-example-files--other">    
        <li>
    <a class="dropdown-item" href="../resources/tools.html" rel="" target="">
 <span class="dropdown-text"><strong>Other Tools/Resources</strong></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/example-figure-script.R" rel="" target="">
 <span class="dropdown-text">example-figure-script.R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/example-rmarkdown-file-with-fig-script.Rmd" rel="" target="">
 <span class="dropdown-text">example-rmarkdown-file-with-fig-script.Rmd</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cheatsheets" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><strong>Cheatsheets</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cheatsheets">    
        <li>
    <a class="dropdown-item" href="../cheatsheets_and_tips/symbols.html" rel="" target="">
 <span class="dropdown-text">Symbols</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../cheatsheets/rmarkdown-2.0.pdf" rel="" target="">
 <span class="dropdown-text">RMarkdown</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" rel="" target="">
 <span class="dropdown-text">Data Wrangling with {dplyr} and {tidyr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/quarto.html" rel="" target="">
 <span class="dropdown-text">Quarto (Publish and Share)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/strings.html" rel="" target="">
 <span class="dropdown-text">String Manipulation with {stringr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/html/data-import.html" rel="" target="">
 <span class="dropdown-text">Reading and Writing Data with {readr}</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../cheatsheets/Data_Science_With_R_Workflow.pdf" rel="" target="">
 <span class="dropdown-text">Data Science with RWorkflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://rstudio.github.io/cheatsheets/" rel="" target="">
 <span class="dropdown-text">More Cheatsheets From RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://images.datacamp.com/image/upload/v1676540721/Marketing/Blog/Quarto_Cheat_Sheet.pdf" rel="" target="">
 <span class="dropdown-text">Quarto Cheat Sheet (what Quarto Files Look Like)</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/slicesofdata" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://gabrielcook.xyz" rel="" target="">
 <span class="menu-text">Me</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../modules/index.html">Modules</a></li><li class="breadcrumb-item"><a href="../modules/data_frame_manipulation_and_wrangling.html">Data frame manipulation and wrangling</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../schedule/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules_setup/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation, Setup, &amp; R Basics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules_setup/Installation &amp; Setup/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation &amp; Setup</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/Installation &amp; Setup/installing_r_and_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installing R &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/Installation &amp; Setup/installing_git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installing Git</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules_setup/R Basics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Basics and Refreshers</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/R Basics/introduction_to_r_rstudio_and_rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to RStudio, R Markdown, &amp; Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/R Basics/functions_and_scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions, Arguments, and R scripts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/R Basics/vectors_and_data_frame_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vectors and data frame basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules_setup/R Basics/reading_data_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading data files</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modules/project_management/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Management</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/project_management/setting_up_git_and_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Project Management 01</em>: Setting Up Git and GitHub for R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/project_management/using_git_and_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Project Management 02</em>: R Projects, Git, and GitHub</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/graphical_perception.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graphical perception</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/data_frame_manipulation_and_wrangling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data frame manipulation and wrangling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/data_subsets_and_summaries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data subsets and summaries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/considerations_in_data_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Considerations in data visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/designing_perceptually_efficient_visualizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Designing perceptually-efficient visualizations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/ggplot_and_the_grammar_of_graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">{<code>ggplot2</code>}: The Grammar of Graphics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/visualizing_associations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualizing associations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/spatial_position_and_adjustment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial position and adjustment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/color_scales_and_palettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Color scales and palettes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/coordinates_axes_and_position_scales.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coordinates, axes, and position scales</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/statistical_transformations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical transformations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/visualizing_more_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualizing more distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/visualizing_uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Visualizing uncertainty</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/visualizing_trends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualizing trends</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/legends_and_arrangement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Legends and arrangement</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/multi_panel_plots_faceting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Multi-panel plots: Faceting</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/attentional_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Attentional control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modules/themes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bonus: Figure design &amp; themes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../project/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/01_project_team_roles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Team membership and roles</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/02_project_midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Midterm presentation</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/03_project_final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Final Presentation</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/04_project_report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Final Report</em></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project/05_project_tasks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Project Tasks</em></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><strong>Overview</strong></a>
  <ul class="collapse">
  <li><a href="#readings-and-preparation" id="toc-readings-and-preparation" class="nav-link" data-scroll-target="#readings-and-preparation"><strong>Readings and Preparation</strong></a></li>
  <li><a href="#supplementary-readings-optional" id="toc-supplementary-readings-optional" class="nav-link" data-scroll-target="#supplementary-readings-optional"><strong>Supplementary Readings (Optional)</strong></a></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries"><strong>Libraries</strong></a></li>
  <li><a href="#external-functions" id="toc-external-functions" class="nav-link" data-scroll-target="#external-functions"><strong>External Functions</strong></a></li>
  </ul></li>
  <li><a href="#loading-libraries" id="toc-loading-libraries" class="nav-link" data-scroll-target="#loading-libraries"><strong>Loading Libraries</strong></a></li>
  <li><a href="#a-grammar-for-data-wrangling" id="toc-a-grammar-for-data-wrangling" class="nav-link" data-scroll-target="#a-grammar-for-data-wrangling"><strong>A Grammar for Data Wrangling</strong></a></li>
  <li><a href="#some-common-ways-for-selecting-variables-using-dplyr" id="toc-some-common-ways-for-selecting-variables-using-dplyr" class="nav-link" data-scroll-target="#some-common-ways-for-selecting-variables-using-dplyr"><strong>Some Common Ways for Selecting Variables Using <code>{dplyr}</code></strong></a>
  <ul class="collapse">
  <li><a href="#selecting-variables-using-dplyrselect" id="toc-selecting-variables-using-dplyrselect" class="nav-link" data-scroll-target="#selecting-variables-using-dplyrselect"><strong>Selecting Variables using <code>dplyr::select()</code></strong></a>
  <ul class="collapse">
  <li><a href="#selecting-variables-by-column-position" id="toc-selecting-variables-by-column-position" class="nav-link" data-scroll-target="#selecting-variables-by-column-position"><strong>Selecting Variables by Column Position</strong></a></li>
  <li><a href="#selecting-variables-by-column-name" id="toc-selecting-variables-by-column-name" class="nav-link" data-scroll-target="#selecting-variables-by-column-name"><strong>Selecting Variables by Column Name</strong></a></li>
  <li><a href="#selecting-and-selecting-out-variables-bybetween-index" id="toc-selecting-and-selecting-out-variables-bybetween-index" class="nav-link" data-scroll-target="#selecting-and-selecting-out-variables-bybetween-index"><strong>Selecting and Selecting Out Variables By/Between Index</strong></a></li>
  <li><a href="#selecting-and-selecting-out-variables-by-or-between-character-name" id="toc-selecting-and-selecting-out-variables-by-or-between-character-name" class="nav-link" data-scroll-target="#selecting-and-selecting-out-variables-by-or-between-character-name"><strong>Selecting and Selecting Out Variables By or Between Character Name</strong></a></li>
  <li><a href="#selecting-and-selecting-out-variables-characters-in-their-names" id="toc-selecting-and-selecting-out-variables-characters-in-their-names" class="nav-link" data-scroll-target="#selecting-and-selecting-out-variables-characters-in-their-names"><strong>Selecting and Selecting Out Variables Characters in Their Names</strong></a></li>
  <li><a href="#selecting-and-selecting-out-variables-by-type" id="toc-selecting-and-selecting-out-variables-by-type" class="nav-link" data-scroll-target="#selecting-and-selecting-out-variables-by-type"><strong>Selecting and Selecting Out Variables by Type</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#creatingmutating-variables" id="toc-creatingmutating-variables" class="nav-link" data-scroll-target="#creatingmutating-variables"><strong>Creating/Mutating Variables</strong></a>
  <ul class="collapse">
  <li><a href="#creatingmutating-a-constant-value" id="toc-creatingmutating-a-constant-value" class="nav-link" data-scroll-target="#creatingmutating-a-constant-value"><strong>Creating/Mutating A Constant Value</strong></a></li>
  <li><a href="#creatingmutating-a-constant-character" id="toc-creatingmutating-a-constant-character" class="nav-link" data-scroll-target="#creatingmutating-a-constant-character"><strong>Creating/Mutating A Constant Character</strong></a></li>
  <li><a href="#creatingmutating-a-logical-object" id="toc-creatingmutating-a-logical-object" class="nav-link" data-scroll-target="#creatingmutating-a-logical-object"><strong>Creating/Mutating A Logical Object</strong></a></li>
  <li><a href="#creatingmutating-based-on-function" id="toc-creatingmutating-based-on-function" class="nav-link" data-scroll-target="#creatingmutating-based-on-function"><strong>Creating/Mutating Based on Function</strong></a></li>
  </ul></li>
  <li><a href="#filtering-rows" id="toc-filtering-rows" class="nav-link" data-scroll-target="#filtering-rows"><strong>Filtering Rows</strong></a>
  <ul class="collapse">
  <li><a href="#understanding-filtering-operators" id="toc-understanding-filtering-operators" class="nav-link" data-scroll-target="#understanding-filtering-operators"><strong>Understanding Filtering Operators</strong></a></li>
  <li><a href="#filtering-using-filter" id="toc-filtering-using-filter" class="nav-link" data-scroll-target="#filtering-using-filter"><strong>Filtering Using <code>filter()</code></strong></a>
  <ul class="collapse">
  <li><a href="#filtering-matches-to-a-specific-character-value" id="toc-filtering-matches-to-a-specific-character-value" class="nav-link" data-scroll-target="#filtering-matches-to-a-specific-character-value"><strong>Filtering Matches to a Specific Character Value</strong></a></li>
  <li><a href="#filtering-by-a-relative-value" id="toc-filtering-by-a-relative-value" class="nav-link" data-scroll-target="#filtering-by-a-relative-value"><strong>Filtering by a Relative Value</strong></a></li>
  <li><a href="#filtering-by-a-specific-value" id="toc-filtering-by-a-specific-value" class="nav-link" data-scroll-target="#filtering-by-a-specific-value"><strong>Filtering by a Specific Value</strong></a></li>
  <li><a href="#filtering-using-a-function" id="toc-filtering-using-a-function" class="nav-link" data-scroll-target="#filtering-using-a-function"><strong>Filtering Using a Function</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#filtering-missing-data-nas" id="toc-filtering-missing-data-nas" class="nav-link" data-scroll-target="#filtering-missing-data-nas"><strong>Filtering Missing Data (<code>NAs</code>)</strong></a>
  <ul class="collapse">
  <li><a href="#filter-using-na.omit" id="toc-filter-using-na.omit" class="nav-link" data-scroll-target="#filter-using-na.omit"><strong>Filter using <code>na.omit()</code></strong></a></li>
  <li><a href="#filter-using-is.na-and-is.na" id="toc-filter-using-is.na-and-is.na" class="nav-link" data-scroll-target="#filter-using-is.na-and-is.na"><strong>Filter using <code>is.na()</code> and <code>!is.na()</code></strong></a></li>
  <li><a href="#filter-using-complete.cases" id="toc-filter-using-complete.cases" class="nav-link" data-scroll-target="#filter-using-complete.cases"><strong>Filter using <code>complete.cases()</code></strong></a></li>
  <li><a href="#removing-duplicate-rows-using-distinct" id="toc-removing-duplicate-rows-using-distinct" class="nav-link" data-scroll-target="#removing-duplicate-rows-using-distinct"><strong>Removing duplicate rows using <code>distinct()</code></strong></a>
  <ul class="collapse">
  <li><a href="#removing-duplicates-across-all-variables" id="toc-removing-duplicates-across-all-variables" class="nav-link" data-scroll-target="#removing-duplicates-across-all-variables"><strong>Removing Duplicates Across All Variables</strong></a></li>
  <li><a href="#removing-duplicates-based-on-a-variable" id="toc-removing-duplicates-based-on-a-variable" class="nav-link" data-scroll-target="#removing-duplicates-based-on-a-variable"><strong>Removing Duplicates Based on a Variable</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#the-data-manipulation-workflow-putting-it-all-together" id="toc-the-data-manipulation-workflow-putting-it-all-together" class="nav-link" data-scroll-target="#the-data-manipulation-workflow-putting-it-all-together"><strong>The Data Manipulation Workflow: Putting It All Together</strong></a></li>
  <li><a href="#many-more-use-case-examples-optional" id="toc-many-more-use-case-examples-optional" class="nav-link" data-scroll-target="#many-more-use-case-examples-optional"><strong>Many More Use-Case Examples (Optional)</strong></a>
  <ul class="collapse">
  <li><a href="#filter-cases-using" id="toc-filter-cases-using" class="nav-link" data-scroll-target="#filter-cases-using"><em>Filter Cases using <code>==</code></em></a></li>
  </ul></li>
  <li><a href="#filtering-cases-by-value" id="toc-filtering-cases-by-value" class="nav-link" data-scroll-target="#filtering-cases-by-value"><strong>Filtering Cases by Value</strong></a>
  <ul class="collapse">
  <li><a href="#filter-by-and-or-or" id="toc-filter-by-and-or-or" class="nav-link" data-scroll-target="#filter-by-and-or-or"><strong>Filter by <code>&lt;</code> and <code>&gt;</code> or <code>&lt;=</code> or <code>&gt;=</code></strong></a></li>
  <li><a href="#filter-cases-by-conditional-x-or-y-using-operator" id="toc-filter-cases-by-conditional-x-or-y-using-operator" class="nav-link" data-scroll-target="#filter-cases-by-conditional-x-or-y-using-operator"><strong>Filter Cases by Conditional X <em>or</em> Y Using <code>|</code> Operator…</strong></a></li>
  <li><a href="#filter-cases-between-values-with-between" id="toc-filter-cases-between-values-with-between" class="nav-link" data-scroll-target="#filter-cases-between-values-with-between"><strong>Filter Cases Between Values with <code>between()</code></strong></a></li>
  <li><a href="#filter-by-range-using-the-in-operator-this-is-in-meaning-in" id="toc-filter-by-range-using-the-in-operator-this-is-in-meaning-in" class="nav-link" data-scroll-target="#filter-by-range-using-the-in-operator-this-is-in-meaning-in"><strong>Filter by range using the <code>%in%</code> operator (this is IN meaning in)</strong></a></li>
  <li><a href="#filter-by-exclusion" id="toc-filter-by-exclusion" class="nav-link" data-scroll-target="#filter-by-exclusion"><strong>Filter by exclusion</strong></a></li>
  <li><a href="#filter-by-conditional-x-and-y-using-operator" id="toc-filter-by-conditional-x-and-y-using-operator" class="nav-link" data-scroll-target="#filter-by-conditional-x-and-y-using-operator"><em>Filter by conditional X and Y using <code>&amp;</code> operator…</em></a></li>
  </ul></li>
  <li><a href="#filter-cases-containing-characters-using-stringrstr_detect-and-in" id="toc-filter-cases-containing-characters-using-stringrstr_detect-and-in" class="nav-link" data-scroll-target="#filter-cases-containing-characters-using-stringrstr_detect-and-in"><strong>Filter Cases Containing Characters Using <code>stringr::str_detect()</code> and <code>%in%</code>:</strong></a></li>
  <li><a href="#session-information" id="toc-session-information" class="nav-link" data-scroll-target="#session-information"><strong>Session Information</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data frame manipulation and wrangling</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriel I. Cook </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 3, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<!--
::: callout-important
FALSE
:::
-->
<section id="overview" class="level1">
<h1><strong>Overview</strong></h1>
<p>In this module, we will start manipulating data frames. Data frames are composed of column variables and row observations/cases and we will address how to perform operations on both. We will learn how to use <strong>{dplyr}</strong>, rather than <code>base R</code> to select, remove, add, and modify vectors in data frames. In addition, we will address how to filter and arrange rows in various ways. The focus will be on cleaning or wrangling data. Helper functions from libraries like <strong>{tidyr}</strong>, <strong>{stringr}</strong>, and <strong>{tidyselect}</strong> are also used in conjunction with <strong>{dplyr}</strong>.</p>
<section id="readings-and-preparation" class="level2">
<h2 class="anchored" data-anchor-id="readings-and-preparation"><strong>Readings and Preparation</strong></h2>
<p><em>Before Class</em>: First, read to familiarize yourself with the concepts rather than master them. I will assume that you attend class with some level of basic understanding of concepts and working of functions. The goal of reading should be to understand and implement code functions as well as support your understanding and help your troubleshooting of problems. This cannot happen if you just read the content without interacting with it, however reading is absolutely essential to being successful during class time. Work through some examples so that you have a good idea of your level of understanding and confidence.</p>
<p><em>Class</em>: In class, some functions and concepts will be introduced and we will practice implementing code through exercises.</p>
</section>
<section id="supplementary-readings-optional" class="level2">
<h2 class="anchored" data-anchor-id="supplementary-readings-optional"><strong>Supplementary Readings (Optional)</strong></h2>
<ul>
<li><a href="https://r4ds.hadley.nz/data-transform">Data Transformation</a></li>
<li><a href="https://www.markhuberdatascience.org/_files/ugd/c2b9b6_543ea42a1ea64e32b4440b34ffd71635.pdf#page=69">Huber: Transforming Data</a></li>
</ul>
</section>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries"><strong>Libraries</strong></h2>
<ul>
<li><strong>{here}</strong>: 1.0.1: for path management</li>
<li><strong>{dplyr}</strong> 1.1.4: for selecting, filtering, and mutating</li>
<li><strong>{stringr}</strong>: 1.5.1: for working with strings</li>
<li><strong>{tidyselect}</strong>: 1.2.1: for selecting sets from strings <!--
- **{magrittr}** 2.0.3: for code clarity and piping data frame objects
--></li>
</ul>
</section>
<section id="external-functions" class="level2">
<h2 class="anchored" data-anchor-id="external-functions"><strong>External Functions</strong></h2>
<p><code>view_html()</code>: for viewing data frames in <code>HTML</code> format, which I created as an alternative to <code>View()</code>. You can <code>source()</code> this from your <code>/src/functions</code> directory or download from <a href="the_file">here</a>.</p>
<!--
If for some reason, you do not have the function saved, you can get it from the course site.

`source('https://raw.githubusercontent.com/slicesofdata/dataviz24/main/src/functions/view_html.R')`
-->
<p>To define all functions in your <code>/src/functions</code> directory, <code>R.utils::sourceDirectory()</code> will be helpful:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>R.utils<span class="sc">::</span><span class="fu">sourceDirectory</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"src"</span>, <span class="st">"functions"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="loading-libraries" class="level1">
<h1><strong>Loading Libraries</strong></h1>
<p>We will work with a few different libraries for data manipulation. Let’s load them into our work space using <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyselect)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Make note of any warnings that appear when loading libraries. There are some libraries that contain functions with the same names. Be aware that the most recently loaded library function will take precedence. You can avoid confusion using <code>::</code> to call a function from a particular library (e.g., <code>libraryname::functionname()</code>).</p>
</section>
<section id="a-grammar-for-data-wrangling" class="level1">
<h1><strong>A Grammar for Data Wrangling</strong></h1>
<p>The <a href="https://dplyr.tidyverse.org/"><strong>{dplyr}</strong></a> package presents a type of grammar for wrangling data (<a href="https://www.researchgate.net/publication/275646200_dplyr_A_Grammar_of_Data_Manipulation">Wickham <em>and</em> Francois 2014</a>). <strong>{dplyr}</strong> is part of the <a href="https://www.tidyverse.org/"><strong>{tidyverse}</strong></a> ecosystem which loads using <code>library(tidyverse)</code>, or specifically using <code>library(dplyr)</code>. <strong>{dplyr}</strong> also imports functions from <strong>{tidyselect}</strong>, which is also part of the <strong>{tidyverse}</strong> ecosystem.</p>
<p>The functions from any <code>R</code> package can be called after loading the package library. One does not need to reference the package explicitly when calling a function but to avoid confusion, we will often reference the package/library and the function together (e.g., <code>package::function()</code>).</p>
<p>Working with data involves creating new column variables, removing or renaming column variables, removing or deleting row observations, sorting, and summarizing data (often by groups/factors). etc. Consequently, there are five main function verbs for working with data in a data frame: <code>select</code>, <code>filter</code>, <code>mutate</code>, <code>arange</code>, and <code>summarize</code>. Their corresponding functions are:</p>
<ul>
<li><code>select(dataframe, variables_to_select)</code>: select columns to retain</li>
<li><code>mutate(dataframe, variables_to_create)</code> and <code>dplyr::rename()</code>: add or modify existing columns</li>
<li><code>filter(dataframe, rows_to_select)</code>: subset by rows</li>
<li><code>arrange(dataframe, variable_to_sort_by)</code>: sort rows</li>
<li><code>summarize(dataframe, procedures_for_summarizing)</code> in conjunction with <code>dplyr::group_by()</code>: aggregate the data in some way</li>
</ul>
</section>
<section id="some-common-ways-for-selecting-variables-using-dplyr" class="level1">
<h1><strong>Some Common Ways for Selecting Variables Using <code>{dplyr}</code></strong></h1>
<p>You may often wish to subset data frames containing multiple variables to make them more lean and manageable for carrying out a specific goal. For such tasks, <code>select()</code> will be used.</p>
<section id="selecting-variables-using-dplyrselect" class="level2">
<h2 class="anchored" data-anchor-id="selecting-variables-using-dplyrselect"><strong>Selecting Variables using <code>dplyr::select()</code></strong></h2>
<p>You can reference variables by their names or by their column position in a data frame (e.g., 1, 25, etc.).</p>
<p>Using <code>select()</code>, you can select columns/variables from a data frame. The variables you select are retained and variables omitted that you don’t select are omitted in the returned data frame.</p>
<p>Before using a function you have never used before, you would always review the documentation for what the function is designed to accomplish.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(dplyr<span class="sc">::</span>select)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>?dplyr<span class="sc">::</span>select</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can see that <code>select()</code> is used for <strong><em>selecting variables</em></strong> from a data frame and there are many selection features for accomplishing such tasks.</p>
<p><strong>Parameters/Arguments:</strong></p>
<ul>
<li><code>.data</code>: a data frame</li>
<li><code>...</code>: one ore more expressions separated by commas</li>
</ul>
<p>We will definitely need a data frame and we will need variables to select.</p>
<p>Let’s start with a data frame. The <code>USAressts</code> data is built into <code>R</code> so let’s just use that for now. Let’s use <code>select()</code> to subset a data frame in two ways, first without piping and then with piping (preferred method).</p>
<ol type="1">
<li>Without piping</li>
</ol>
<p>At a bare minimum, we will need to pass a data frame to <code>select()</code> at very least. But what happens if we don’t pass variables to select?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> USArrests)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data frame with 0 columns and 50 rows</code></pre>
</div>
</div>
<p><code>select()</code> is designed to take a data frame and select column variables from that data frame. If you do not specify what to select, you will see the that the returned data frame has 0 columns and 50 rows.</p>
<ol start="2" type="1">
<li>Piping using <code>|&gt;</code></li>
</ol>
<p>If you pipe the data frame into the function, <code>.data = USArrests</code> is inherited and you do not need to declare it within <code>select()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data frame with 0 columns and 50 rows</code></pre>
</div>
</div>
<p>Again, the returned data frame has 0 columns and 50 rows. If you use <code>select()</code> without specifying any variables for the function to select, as seen in both examples, you will have data frame that contains no columns. Let’s address some methods for selecting variables.</p>
<section id="selecting-variables-by-column-position" class="level3">
<h3 class="anchored" data-anchor-id="selecting-variables-by-column-position"><strong>Selecting Variables by Column Position</strong></h3>
<p>Variables are columns in a data frame, so they can be selected by their element position <!--([previously covered here](https://gabrielcook.xyz/fods24/modules/05_vectors_and_data_frame_basics.html#vectors-contain-ordered-componentselements))-->. If you wanted to select the first and third column, one way is to specify each position separated by a comma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span>        <span class="co"># take the data frame</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>, <span class="dv">3</span>)      <span class="co"># select columns 1 and 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder UrbanPop
Alabama          13.2       58
Alaska           10.0       48
Arizona           8.1       80
Arkansas          8.8       50
California        9.0       91
Colorado          7.9       78
Connecticut       3.3       77
Delaware          5.9       72
Florida          15.4       80
Georgia          17.4       60
Hawaii            5.3       83
Idaho             2.6       54
Illinois         10.4       83
Indiana           7.2       65
Iowa              2.2       57
Kansas            6.0       66
Kentucky          9.7       52
Louisiana        15.4       66
Maine             2.1       51
Maryland         11.3       67
Massachusetts     4.4       85
Michigan         12.1       74
Minnesota         2.7       66
Mississippi      16.1       44
Missouri          9.0       70
Montana           6.0       53
Nebraska          4.3       62
Nevada           12.2       81
New Hampshire     2.1       56
New Jersey        7.4       89
New Mexico       11.4       70
New York         11.1       86
North Carolina   13.0       45
North Dakota      0.8       44
Ohio              7.3       75
Oklahoma          6.6       68
Oregon            4.9       67
Pennsylvania      6.3       72
Rhode Island      3.4       87
South Carolina   14.4       48
South Dakota      3.8       45
Tennessee        13.2       59
Texas            12.7       80
Utah              3.2       80
Vermont           2.2       32
Virginia          8.5       63
Washington        4.0       73
West Virginia     5.7       39
Wisconsin         2.6       66
Wyoming           6.8       60</code></pre>
</div>
</div>
<p>Let’s remind ourselves of how piping works. Remember that piping will modify the data frame in steps, with each pipe passing the current form of the data frame to the next function. Not that you ever want to write two lines of code and perform this extra step to select only column 1 but you could pipe the data frame to another <code>select()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span>        <span class="co"># take the data frame</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">|&gt;</span>   <span class="co"># select columns 1 and 3</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>)         <span class="co"># then select column 1 only</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder
Alabama          13.2
Alaska           10.0
Arizona           8.1
Arkansas          8.8
California        9.0
Colorado          7.9
Connecticut       3.3
Delaware          5.9
Florida          15.4
Georgia          17.4
Hawaii            5.3
Idaho             2.6
Illinois         10.4
Indiana           7.2
Iowa              2.2
Kansas            6.0
Kentucky          9.7
Louisiana        15.4
Maine             2.1
Maryland         11.3
Massachusetts     4.4
Michigan         12.1
Minnesota         2.7
Mississippi      16.1
Missouri          9.0
Montana           6.0
Nebraska          4.3
Nevada           12.2
New Hampshire     2.1
New Jersey        7.4
New Mexico       11.4
New York         11.1
North Carolina   13.0
North Dakota      0.8
Ohio              7.3
Oklahoma          6.6
Oregon            4.9
Pennsylvania      6.3
Rhode Island      3.4
South Carolina   14.4
South Dakota      3.8
Tennessee        13.2
Texas            12.7
Utah              3.2
Vermont           2.2
Virginia          8.5
Washington        4.0
West Virginia     5.7
Wisconsin         2.6
Wyoming           6.8</code></pre>
</div>
</div>
<p>The better approach is just to select column 1 in a single line.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder
Alabama          13.2
Alaska           10.0
Arizona           8.1
Arkansas          8.8
California        9.0
Colorado          7.9
Connecticut       3.3
Delaware          5.9
Florida          15.4
Georgia          17.4
Hawaii            5.3
Idaho             2.6
Illinois         10.4
Indiana           7.2
Iowa              2.2
Kansas            6.0
Kentucky          9.7
Louisiana        15.4
Maine             2.1
Maryland         11.3
Massachusetts     4.4
Michigan         12.1
Minnesota         2.7
Mississippi      16.1
Missouri          9.0
Montana           6.0
Nebraska          4.3
Nevada           12.2
New Hampshire     2.1
New Jersey        7.4
New Mexico       11.4
New York         11.1
North Carolina   13.0
North Dakota      0.8
Ohio              7.3
Oklahoma          6.6
Oregon            4.9
Pennsylvania      6.3
Rhode Island      3.4
South Carolina   14.4
South Dakota      3.8
Tennessee        13.2
Texas            12.7
Utah              3.2
Vermont           2.2
Virginia          8.5
Washington        4.0
West Virginia     5.7
Wisconsin         2.6
Wyoming           6.8</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-by-column-name" class="level3">
<h3 class="anchored" data-anchor-id="selecting-variables-by-column-name"><strong>Selecting Variables by Column Name</strong></h3>
<p>Rather than position, you will likely wish to select by variable name. We will address several approaches for doing so. Each approach are beneficial in different contexts.</p>
<p>In order to know the names of the data frame, you can pass the data frame to the <code>names()</code> function, which will return the column names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Murder"   "Assault"  "UrbanPop" "Rape"    </code></pre>
</div>
</div>
<p>Or pass the data frame to <code>head()</code> to see the names atop each colomn.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault UrbanPop Rape
Alabama      13.2     236       58 21.2
Alaska       10.0     263       48 44.5
Arizona       8.1     294       80 31.0
Arkansas      8.8     190       50 19.5
California    9.0     276       91 40.6
Colorado      7.9     204       78 38.7</code></pre>
</div>
</div>
<p>There are many ways to inspect variable names but those will suffice for now.</p>
<section id="selecting-variables-as-unquoted-expressions" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-as-unquoted-expressions"><strong>Selecting Variables as Unquoted Expressions</strong></h4>
<p>Variables can be passed separately without quotes. We can pass two arguments, one with <code>Murder</code> and the other with <code>Assault</code>, separating each with a comma. Because of some special characteristics of the <strong>{dplyr}</strong>, we can use variable names <strong>without</strong> quotes. Let’s also reduce the returned data frame using <code>head()</code> in order to save space.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Murder, Assault) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault
Alabama      13.2     236
Alaska       10.0     263
Arizona       8.1     294
Arkansas      8.8     190
California    9.0     276
Colorado      7.9     204</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-as-charactersstrings" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-as-charactersstrings"><strong>Selecting Variables as Characters/Strings</strong></h4>
<p>You are most likely familiar with variable names as quoted strings. We can pass two arguments here using the variable names in quotes. This approach is more similar to procedures used with <code>base R</code> functions as you cannot pass unquoted expressions in <code>base R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"Murder"</span>, <span class="st">"Assault"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault
Alabama      13.2     236
Alaska       10.0     263
Arizona       8.1     294
Arkansas      8.8     190
California    9.0     276
Colorado      7.9     204</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-as-a-character-vector" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-as-a-character-vector"><strong>Selecting Variables as a Character Vector</strong></h4>
<p>What if your variables were in a vector, <code>c("Murder", "Assault"))</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"Murder"</span>, <span class="st">"Assault"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault
Alabama      13.2     236
Alaska       10.0     263
Arizona       8.1     294
Arkansas      8.8     190
California    9.0     276
Colorado      7.9     204</code></pre>
</div>
</div>
<p>The same will work if you passed a numeric vector <code>c(1, 3)</code>.</p>
</section>
<section id="selecting-using-an-external-vector-object" class="level4">
<h4 class="anchored" data-anchor-id="selecting-using-an-external-vector-object"><strong>Selecting Using an External Vector Object</strong></h4>
<p>In many use cases, you will will have a vector of variable names that would will want to pass rather than type individually. This approach also reduces confusion when you have key variables that you want to work with. Create a vector using <code>c()</code> (to combine elements) once and then use again and again. If you make any changes, you will only have to make them once, rather than in multiple places.</p>
<p>First, create the vector using <code>c()</code> that contains two string elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"Murder"</span>, <span class="st">"Assault"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Murder"  "Assault"</code></pre>
</div>
</div>
<p>At this point, there is no object holding the vector. We can assign the vector to a name so that we have a vector object. Let’s name it <code>keep_vars</code> to represent variables in the data frame that we want to keep.</p>
<p>Assign the vector to <code>keep_vars</code> using the assignment operator, <code>&lt;-</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>keep_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Murder"</span>, <span class="st">"Assault"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Inspecting the <code>keep_vars</code> object by typing its name will return it. You can see that it contains 2 character/string elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>keep_vars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Murder"  "Assault"</code></pre>
</div>
</div>
<p>Now that we know what we are dealing with, pass the vector obect as as arugme to <code>select()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(keep_vars) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(keep_vars)

  # Now:
  data %&gt;% select(all_of(keep_vars))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault
Alabama          13.2     236
Alaska           10.0     263
Arizona           8.1     294
Arkansas          8.8     190
California        9.0     276
Colorado          7.9     204
Connecticut       3.3     110
Delaware          5.9     238
Florida          15.4     335
Georgia          17.4     211
Hawaii            5.3      46
Idaho             2.6     120
Illinois         10.4     249
Indiana           7.2     113
Iowa              2.2      56
Kansas            6.0     115
Kentucky          9.7     109
Louisiana        15.4     249
Maine             2.1      83
Maryland         11.3     300
Massachusetts     4.4     149
Michigan         12.1     255
Minnesota         2.7      72
Mississippi      16.1     259
Missouri          9.0     178
Montana           6.0     109
Nebraska          4.3     102
Nevada           12.2     252
New Hampshire     2.1      57
New Jersey        7.4     159
New Mexico       11.4     285
New York         11.1     254
North Carolina   13.0     337
North Dakota      0.8      45
Ohio              7.3     120
Oklahoma          6.6     151
Oregon            4.9     159
Pennsylvania      6.3     106
Rhode Island      3.4     174
South Carolina   14.4     279
South Dakota      3.8      86
Tennessee        13.2     188
Texas            12.7     201
Utah              3.2     120
Vermont           2.2      48
Virginia          8.5     156
Washington        4.0     145
West Virginia     5.7      81
Wisconsin         2.6      53
Wyoming           6.8     161</code></pre>
</div>
</div>
<p>Hmm. Warning message.</p>
<p><strong>Note:</strong> <code>select(keep_vars)</code> is deprecated as a solution, so if you see this approach someplace, it won’t work properly at this time or in the future. The warning message states that cannot do this without some modifications. What is suggested is <code>all_of()</code>. When your variables are in an external variable, <code>all_of(keep_vars)</code> will tell <code>select()</code> that your variables are <em>all of the variables in the vector</em>. Yes, this is an extra step but worth the flexibility.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(keep_vars)) <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault
Alabama      13.2     236
Alaska       10.0     263
Arizona       8.1     294
Arkansas      8.8     190
California    9.0     276
Colorado      7.9     204</code></pre>
</div>
</div>
<p>Using <code>all_of()</code> could be problematic if even <em>one</em> variable in your vector does not exist. Let’s add some variables that are not in the data frame and then pass that vector.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>keep_vars_more <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Murder"</span>, <span class="st">"Assault"</span>, <span class="st">"Var_x"</span>, <span class="st">"Var_y"</span>, <span class="st">"Var_z"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(keep_vars_more)) <span class="sc">|&gt;</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You will see the following error message:</p>
<pre><code>Error in `all_of()`:
! Can't subset columns that don't exist.
✖ Columns `Var_x`, `Var_y`, and `Var_z` don't exist.</code></pre>
<p><strong>Tip:</strong> Rather than using <code>tidyselect::all_of()</code>, use <code>tidyselect::any_of()</code>. In this instance, <em>any of</em> the variables that exist in the data frame will be selection. Those variables that are not in the data frame will be ignored. With this approach, your code will not break if there something changes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(keep_vars_more)) <span class="sc">|&gt;</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder Assault
Alabama      13.2     236
Alaska       10.0     263
Arizona       8.1     294
Arkansas      8.8     190
California    9.0     276
Colorado      7.9     204</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-starting-with-or-ending-with-certain-characters" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-starting-with-or-ending-with-certain-characters"><strong>Selecting Variables Starting with or Ending with Certain Characters</strong></h4>
<p>When you load the <strong>{dplyr}</strong> library, there are functions from other libraries that are imported along with <strong>{dplyr}</strong>’s own functions. These important functions are designed to work with each other, so the people who maintain the libraries have packaged them up nicely so you don’t have to load separate libraries.</p>
<p>Many of the functions are imported from the <strong>{tidyselect}</strong> library and these functions are what give you additional manipulation ability. Some imported functions are: <code>all_of()</code>, <code>any_of()</code>, <code>contains()</code>, <code>ends_with()</code>, <code>everything()</code>, <code>last_col()</code>, <code>matches()</code>, and <code>starts_with()</code>.</p>
<p>With functions like <code>starts_with()</code>, <code>contains()</code>, and <code>ends_with()</code>, you can select variables containing character patterns in their names. For example, rather than code out all variables for a memory span task, you might want to grab variables that contain the characters <code>"span"</code>.</p>
<p>Rather than hard coding variable names (e.g., <code>"measure_time1"</code>, <code>"measure_time2"</code>, <code>c("Murder", "Assault")</code>, etc.) to pass as an argument to <code>select()</code>, you would use another function to <em>help</em> you perform the heaving lifting for you (e.g.,<code>starts_with()</code>). This is often referred to as a <em>helper</em> function. In the case of <code>starts_with()</code>, the variable names that <code>starts_with()</code> specific character patterns get passed to <code>select()</code>. This process represents a good example of what is referred to as <a href="https://en.wikipedia.org/wiki/Functional_programming"><strong>functional programming</strong></a>. This usage represents a good example of <em>working smarter, not harder</em>. Rather than coding specifically what to pass as an argument to another function, you utilize another function to pass its returned object as an argument to another function.</p>
</section>
<section id="selecting-variables-using-starts_with" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-using-starts_with"><strong>Selecting Variables Using <code>starts_with()</code></strong></h4>
<section id="understanding-starts_with" class="level5">
<h5 class="anchored" data-anchor-id="understanding-starts_with"><strong>Understanding <code>starts_with()</code></strong></h5>
<p>We first need to understand what <code>dplyr::starts_with()</code>, actually does. The function name should provide you some insight but for more information, use <code>?starts_with</code>. You should always read the docs on functions so that you know how they work. You cannot brute force a function to do something it does not do. One thing to keep in mind is that <code>starts_with()</code> and many other functions operate on vectors and not data frames. Yes, data frames are comprised of vectors but you cannot apply many functions to the entire data frame without performing some iteration of the function for <em>each</em> vector in that data frame.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">starts_with</span>(match, </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">ignore.case =</span> <span class="cn">TRUE</span>, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="cn">NULL</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Parameters/Arguments:</strong></p>
<ul>
<li><code>match</code>: a character vector</li>
<li><code>ignore.case</code>: if <code>TRUE</code>, the default, ignores case when matching names. This is most flexible.</li>
<li><code>vars</code>: a character vector of variable names. If not supplied, the variables are taken from the current selection context (as established by functions like <code>select()</code> or <code>pivot_longer()</code>).</li>
</ul>
<p>The best way to understand the function is to use it (after reading the documentation). Let’s try out <code>starts_with()</code>. Let’s set a required pattern <code>match = some character</code> and because <code>vars = NULL</code> by default, let’s just set <code>vars = some character vector</code>. If you reviewed the documentation or looked at the arguments above, <code>vars</code> is not the second parameter, so you will want to name it in the function call if it takes that second position as seen below. We will first test this function without using it on a data frame.</p>
<p>We set <code>match = "a"</code> and <code>vars = c("Hello", "Hi", "Bye")</code>. This will look for character <code>"a"</code> to match the elements of a character vector <code>c("Hello", "Hi", "Bye")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">starts_with</span>(<span class="at">match =</span> <span class="st">"a"</span>, </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
<p>What is returned is <code>integer(0)</code>, which is actually speak for “there is no match”. Not very intuitive. Hmm, OK. Let’s try another character.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">starts_with</span>(<span class="at">match =</span> <span class="st">"b"</span>, </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>OK, so now an integer is returned (yes, try <code>is.integer()</code> if you don’t believe me).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">starts_with</span>(<span class="st">"b"</span>, </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>              ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>And even though you only see one value, this object is still a vector. We can check using <code>is.vector()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">starts_with</span>(<span class="st">"b"</span>, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Importantly, <code>starts_with()</code> <strong>returns a vector of values</strong>. What do the values correspond to? The values in the vector refer to the element index/position of a match and the number of the elements in the vector tells refers to the number of matches found. Because the <em>third</em> string element <code>"Bye"</code> starts with <code>"b"</code>, that’s what is returned.</p>
<p>Try something else:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">starts_with</span>(<span class="st">"h"</span>, </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
</div>
<p>Now the function returns a vector containing <code>1</code> and a <code>2</code>, giving length = 2, representing both the first and the second elements start with “h”.</p>
<p>Importantly, letter casing is ignored because <code>ignore.case = TRUE</code> by default. Set to <code>FALSE</code> if you want your match to be case sensitive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">starts_with</span>(<span class="st">"h"</span>, </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"Hello"</span>, <span class="st">"Hi"</span>, <span class="st">"Bye"</span>), </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">ignore.case =</span> <span class="cn">FALSE</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
<p>And now there are no matches.</p>
</section>
<section id="selecting-variables-from-a-data-frame-using-starts_with" class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-from-a-data-frame-using-starts_with"><strong>Selecting Variables from a Data Frame using <code>starts_with()</code></strong></h5>
<p>You will typically use <code>starts_with()</code> when working with a data frame and in conjunction with other functions, like <code>select()</code> in order to select variables that start with certain characters. When using <code>starts_with()</code> in the context of <code>select()</code>, the <code>vars</code> argument is essentially passing <code>vars = the names of the columns of the data frame passed to select()</code>.</p>
<p>From <code>.data</code>, <em>select</em> variable names that <em>start with</em> this <em>pattern</em> of characters.</p>
<p>Example:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> mydataframe,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">starts_with</span>(<span class="at">match =</span> <span class="st">"my pattern"</span>,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">vars =</span> <span class="st">"var names of mydataframe"</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                   )</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>      )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s provide two use cases:</p>
<ol type="1">
<li>Without Piping</li>
</ol>
<p>You can pass the <code>data frame</code> as the first argument to <code>select()</code>. You can then pass that (now modified) data frame using a second <code>|&gt;</code> pipe to the <code>head()</code> in order to see the first 6 rows only.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="at">.data =</span> USArrests, </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">starts_with</span>(<span class="st">"m"</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">|&gt;</span> </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder
Alabama      13.2
Alaska       10.0
Arizona       8.1
Arkansas      8.8
California    9.0
Colorado      7.9</code></pre>
</div>
</div>
<p>As long as you remember that the first argument is the data frame, you can omit the parameter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(USArrests, </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">starts_with</span>(<span class="st">"m"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder
Alabama      13.2
Alaska       10.0
Arizona       8.1
Arkansas      8.8
California    9.0
Colorado      7.9</code></pre>
</div>
</div>
<p>Notice that the only column variable that is returned is Murder.</p>
<ol start="2" type="1">
<li>With Piping</li>
</ol>
<p>A better approach, and one used more commonly, is to start with the data frame and then <code>|&gt;</code> it to your functions. Such an approach also makes code editing easier.</p>
<p>Pipe the <code>data frame</code> into <code>select()</code>, which assumes the first argument is a data frame. This is a process you will see used often by others.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"m"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Murder
Alabama      13.2
Alaska       10.0
Arizona       8.1
Arkansas      8.8
California    9.0
Colorado      7.9</code></pre>
</div>
</div>
<p><strong>WARNING:</strong> When piping data frames into functions, some students set a data frame within <code>select()</code> as shown below. This will either cause R to throw an error message or will lead to you working with incorrect data. This is especially true if you are specifying different data frames. Always remember that functions inherit what has been piped to them, either data frames or vectors.</p>
<p>Do not do also set <code>.data = USArrests</code>:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">.data =</span> USArrests, </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"m"</span>)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="selecting-variables-using-ends_with" class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-using-ends_with"><strong>Selecting Variables using <code>ends_with()</code></strong></h5>
<p>You can use <code>dplyr::ends_with()</code> to find matches at the end of strings. This function is useful if you have variables that end based on their measurement type (e.g., “_rt” or “_acc” for reaction times and accuracy, respectively). Having the foresight to create variables is such a way to make accessing them easily later is a good example of <em>working smarter, not harder</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"t"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Assault
Alabama        236
Alaska         263
Arizona        294
Arkansas       190
California     276
Colorado       204</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="selecting-and-selecting-out-variables-bybetween-index" class="level3">
<h3 class="anchored" data-anchor-id="selecting-and-selecting-out-variables-bybetween-index"><strong>Selecting and Selecting Out Variables By/Between Index</strong></h3>
<p>So far, we have address selecting variables. There are, however, many approaches for <em>selecting</em> but also <em>selecting out</em> or omitting column variables. In other words, rather than including 14 out of 15 variables, you could simply exclude 1 of the 15 variables to achieve the same result.</p>
<p>You can pass multiple arguments for each specification or you can pass a single vector that contains all specifications.</p>
<ul>
<li><p><code>select(1, 2)</code>: select first and second columns</p></li>
<li><p><code>select(c(1, 2))</code>: select first and second columns</p></li>
<li><p><code>select(-c(1, 2))</code> or <code>select(!c(1, 2))</code>: select out first and second columns</p></li>
<li><p><code>select(1:2)</code>: select first through second columns</p></li>
<li><p><code>select(c(1:2))</code>: select first through second columns</p></li>
<li><p><code>select(-c(1:2))</code> or <code>select(!c(1:2))</code>: select out first through second columns</p></li>
</ul>
<p><strong>Potential Recommendation</strong>: Use options utilizing <code>c()</code> to pass a vector because this habit will be more versatile with <code>base R</code> functionality. However, online solutions will likely not take this approach.</p>
<p>Let’s first make a data frame to work with. We will name the data frame <code>DAT</code> even though this is a terrible name because it lacks diagnosticity for what the data represent. Using <code>data.frame()</code>, define variable names and for each assign a vector of elements of the same length. Some vectors are numeric and others are character/string as seen by the quotes. The are assigned to a name <code>DAT</code> using the <code>&lt;-</code> operator. Within the function, however, notice that you cannot assign vectors to variables using <code>&lt;-</code>. Inside functions, you use <code>=</code> for assignment or for passing arguments to their parameters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="ot">&lt;-</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Id  =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">101</span>, <span class="dv">102</span>, <span class="dv">103</span>, <span class="dv">104</span>, <span class="dv">100</span>, <span class="dv">105</span>),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sex =</span> <span class="fu">c</span>(<span class="st">'male'</span>, <span class="st">'female'</span>, <span class="st">'Male'</span>, <span class="cn">NA</span>, <span class="st">'man'</span>, <span class="st">"male"</span>, <span class="st">"neither"</span>),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">40</span>, <span class="dv">44</span>, <span class="dv">25</span>, <span class="dv">40</span>),</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Renting =</span> <span class="fu">c</span>(<span class="st">"yes"</span>, <span class="cn">NA</span>, <span class="st">"yes"</span>, <span class="cn">NA</span>, <span class="st">"no"</span>, <span class="st">"yes"</span>, <span class="st">"yes"</span>)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Select columns 1 and 2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>, <span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex
1 100    male
2 101  female
3 102    Male
4 103    &lt;NA&gt;
5 104     man
6 100    male
7 105 neither</code></pre>
</div>
</div>
<p>Select columns 1 and 2 as a vector containing values 1 and 2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex
1 100    male
2 101  female
3 102    Male
4 103    &lt;NA&gt;
5 104     man
6 100    male
7 105 neither</code></pre>
</div>
</div>
<p>Select out columns 1 and 2 as a vector containing values 1 and 2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Renting
1  25     yes
2  33    &lt;NA&gt;
3  27     yes
4  40    &lt;NA&gt;
5  44      no
6  25     yes
7  40     yes</code></pre>
</div>
</div>
<p>Or not these columns using <code>!</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Renting
1  25     yes
2  33    &lt;NA&gt;
3  27     yes
4  40    &lt;NA&gt;
5  44      no
6  25     yes
7  40     yes</code></pre>
</div>
</div>
<p>Select from columns 1 <em>through</em> 2 using the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex
1 100    male
2 101  female
3 102    Male
4 103    &lt;NA&gt;
5 104     man
6 100    male
7 105 neither</code></pre>
</div>
</div>
<p>Select from columns 1 <em>through</em> 3 using a vector (notice the inclusion of <code>c()</code>) containing the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age
1 100    male  25
2 101  female  33
3 102    Male  27
4 103    &lt;NA&gt;  40
5 104     man  44
6 100    male  25
7 105 neither  40</code></pre>
</div>
</div>
<p>Select out columns 1 <em>through</em> 3 using <code>!</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Renting
1     yes
2    &lt;NA&gt;
3     yes
4    &lt;NA&gt;
5      no
6     yes
7     yes</code></pre>
</div>
</div>
</section>
<section id="selecting-and-selecting-out-variables-by-or-between-character-name" class="level3">
<h3 class="anchored" data-anchor-id="selecting-and-selecting-out-variables-by-or-between-character-name"><strong>Selecting and Selecting Out Variables By or Between Character Name</strong></h3>
<p>These approaches are similar to those offered earlier except that some involve passing variables by their name (e.g., character names). Whereas the order of the variables in a data frame may move around, the names may be more stable or permanent, at least after you have cleaned up the names. Consequently, passing variables by name may be more foolproof.</p>
<p>You don’t have to be familiar with all approaches and you may settle on using one that makes the most sense to you.</p>
<ul>
<li><p><code>select("var1", "var2")</code></p></li>
<li><p><code>select(c("var1", "var2"))</code></p></li>
<li><p><code>select(-c("var1", "var2"))</code></p></li>
<li><p><code>select(!c("var1", "var2"))</code></p></li>
<li><p><code>select(var1:var2))</code></p></li>
<li><p><code>select(c("var1":"var2))</code></p></li>
<li><p><code>select(-c("var1":"var2))</code></p></li>
<li><p><code>select(!c("var1":"var2))</code></p></li>
</ul>
<p><strong>Recommendation:</strong> use options utilizing <code>c()</code> as this will be more versatile with <code>base R</code> functionality.</p>
<p>These function approaches also work but they may lead to some confusion regarding usage of quotes:</p>
<ul>
<li><code>select(var1, var2)</code></li>
<li><code>select(c(var1, var2))</code></li>
<li><code>select(-c(var1, var2))</code></li>
<li><code>select(!c(var1, var2))</code></li>
</ul>
<p>Select variables <code>Id</code> though <code>Age</code> using the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Id<span class="sc">:</span>Age)          <span class="co"># select from here to there</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age
1 100    male  25
2 101  female  33
3 102    Male  27
4 103    &lt;NA&gt;  40
5 104     man  44
6 100    male  25
7 105 neither  40</code></pre>
</div>
</div>
<p>Select variables <code>Id</code> though <code>Age</code> passed as strings using the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">"Id"</span><span class="sc">:</span><span class="st">"Age"</span>)      <span class="co"># select from here to there</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age
1 100    male  25
2 101  female  33
3 102    Male  27
4 103    &lt;NA&gt;  40
5 104     man  44
6 100    male  25
7 105 neither  40</code></pre>
</div>
</div>
<p>Select variables <code>Id</code> though <code>Age</code> as a vector containing the variable names passed as strings and using the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"Id"</span><span class="sc">:</span><span class="st">"Age"</span>))    <span class="co"># select from here to there</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age
1 100    male  25
2 101  female  33
3 102    Male  27
4 103    &lt;NA&gt;  40
5 104     man  44
6 100    male  25
7 105 neither  40</code></pre>
</div>
</div>
<p>Select out, or remove, variables <code>Id</code> though <code>Age</code> as a vector (e.g., <code>c()</code>) containing the variable names passed as strings and using the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">"Id"</span><span class="sc">:</span><span class="st">"Age"</span>))     <span class="co"># select out from here to there</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Renting
1     yes
2    &lt;NA&gt;
3     yes
4    &lt;NA&gt;
5      no
6     yes
7     yes</code></pre>
</div>
</div>
<p>You can also use the <code>!</code> operator to select <em>NOT</em> these variables (therefore, all others)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">"Id"</span><span class="sc">:</span><span class="st">"Age"</span>))                    <span class="co"># select out from here to there</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Renting
1     yes
2    &lt;NA&gt;
3     yes
4    &lt;NA&gt;
5      no
6     yes
7     yes</code></pre>
</div>
</div>
<p>Sometimes you will use another function to help you <code>select()</code> variables from the data frame. This is the case when you want to select variables without specifying them by name or position but rather by some quality. For example, you want to select variables with similar names, patterns, in their names or select variables that are numeric only.</p>
<p>When you use another function inside of another function, the function may be referred to as a <em>helper function</em>. In the following examples, we use <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code> as helpfer functions for <code>select()</code>.</p>
</section>
<section id="selecting-and-selecting-out-variables-characters-in-their-names" class="level3">
<h3 class="anchored" data-anchor-id="selecting-and-selecting-out-variables-characters-in-their-names"><strong>Selecting and Selecting Out Variables Characters in Their Names</strong></h3>
<ul>
<li><code>select(starts_with("some character or set of characters"))</code></li>
<li><code>select(ends_with("some character or set of characters"))</code></li>
<li><code>select(contains("some character or set of characters"))</code></li>
</ul>
<section id="selecting-using-starts_with" class="level4">
<h4 class="anchored" data-anchor-id="selecting-using-starts_with"><strong>Selecting using <code>starts_with()</code></strong></h4>
<p>Select variables which start with character “i”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"i"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id
1 100
2 101
3 102
4 103
5 104
6 100
7 105</code></pre>
</div>
</div>
<p>Select variables which DO NOT start with character “s”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"s"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id Age Renting
1 100  25     yes
2 101  33    &lt;NA&gt;
3 102  27     yes
4 103  40    &lt;NA&gt;
5 104  44      no
6 100  25     yes
7 105  40     yes</code></pre>
</div>
</div>
</section>
<section id="selecting-using-ends_with" class="level4">
<h4 class="anchored" data-anchor-id="selecting-using-ends_with"><strong>Selecting using <code>ends_with()</code></strong></h4>
<p>Select variables which end with character “e”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"e"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age
1  25
2  33
3  27
4  40
5  44
6  25
7  40</code></pre>
</div>
</div>
<p>Select variables which end with character “e”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">"e"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Renting
1 100    male     yes
2 101  female    &lt;NA&gt;
3 102    Male     yes
4 103    &lt;NA&gt;    &lt;NA&gt;
5 104     man      no
6 100    male     yes
7 105 neither     yes</code></pre>
</div>
</div>
</section>
<section id="selecting-using-contains" class="level4">
<h4 class="anchored" data-anchor-id="selecting-using-contains"><strong>Selecting using <code>contains()</code></strong></h4>
<p>Select variables which contain character “g”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"g"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Age Renting
1  25     yes
2  33    &lt;NA&gt;
3  27     yes
4  40    &lt;NA&gt;
5  44      no
6  25     yes
7  40     yes</code></pre>
</div>
</div>
<p>Select variables which DO NOT contain character “g”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">"g"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex
1 100    male
2 101  female
3 102    Male
4 103    &lt;NA&gt;
5 104     man
6 100    male
7 105 neither</code></pre>
</div>
</div>
</section>
<section id="selecting-using-regular-expressions" class="level4">
<h4 class="anchored" data-anchor-id="selecting-using-regular-expressions"><strong>Selecting using regular expressions</strong></h4>
<p>Sometimes you do not want to search for specific character strings. Instead, you might want to look for strings that contain particular character patterns. For example, typing out <code>var1</code>, <code>var2</code>, <code>var3</code> could be annoying. You might prefer just grabbing variables that match the pattern <code>"var"</code>.</p>
<p>We will use some <a href="https://www.regular-expressions.info/">regular expressions</a>, or regex, to help us. For the regex, you we will need to specify some code for finding patterns. For example, <code>\\d{4}</code> will search for patterns with 4 digits, whereas the dot star <code>.*</code> will help with all patterns. In particular, <code>.</code> refers to any character (e.g,. digit, alpha character, or any other special character) and <code>*</code> means zero or more times, so this pattern will search for all files that start with 4 digits followed by anything in the name. A pattern will restrict the search to files containing that exact character string. Some example will be helpful.</p>
<p><em>A brief note on <code>mutate()</code>. </em> In order to work through some examples using some regular expressions, we will add, or create, new variables in the data frame. The <code>dplyr::mutate()</code> function will be explained in detail later but for now just understand that it can be used to add variables. We will add 4 new variables which very similar names, which also contain different numbers of digits. Some digits will be at the end of the variable name and some digits will be contained someplace within the name. For simplicity, we will set all rows of the variable equal to the value of 1. Each variable will passed as an argument to <code>mutate()</code> and thus separated by a comma. When they are coded on separate lines, the are easier to see and remove. Focus on making code easy to read.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">var_1    =</span> <span class="dv">1</span>,</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">var_11   =</span> <span class="dv">1</span>,</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">var_3    =</span> <span class="dv">1</span>,</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">var1_var =</span> <span class="dv">1</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="selecting-variables-of-all-patterns-using-." class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-of-all-patterns-using-."><strong>Selecting variables of all patterns using <code>".*"</code></strong></h5>
<p>Select variables containing a <strong>regular expression</strong>, use <code>matches()</code>:</p>
<p><code>.*</code> will grab all column variable names. As a regular expression, it translates to <em>any character and any number of instances</em>. Put quotes around it to make it a string.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">".*"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-with-digits-using-d" class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-with-digits-using-d"><strong>Selecting variables with digits using <code>"\\d"</code></strong></h5>
<p>Add the new variables and <code>|&gt;</code> select. Use the regular expression <code>\\d</code> will grab all variables containing a digit. Put quotes around it so that it is a string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span>                 </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">var_1    =</span> <span class="dv">1</span>,</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">var_11   =</span> <span class="dv">1</span>,</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">var_3    =</span> <span class="dv">1</span>,</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">var1_var =</span> <span class="dv">1</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  var_1 var_11 var_3 var1_var
1     1      1     1        1
2     1      1     1        1
3     1      1     1        1
4     1      1     1        1
5     1      1     1        1
6     1      1     1        1
7     1      1     1        1</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-that-start-and-contain-characters-v.d" class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-that-start-and-contain-characters-v.d"><strong>Selecting variables that start and contain characters <code>"v.*\\d"</code></strong></h5>
<p><code>v.*\\d</code> will grab all variables that start with v and then contain any characters which are followed by a digit:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_1    =</span> <span class="dv">1</span>,</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">var_11   =</span> <span class="dv">1</span>,</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">var_3    =</span> <span class="dv">1</span>,</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">var1_var =</span> <span class="dv">1</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"v.*</span><span class="sc">\\</span><span class="st">d"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  var_1 var_11 var_3 var1_var
1     1      1     1        1
2     1      1     1        1
3     1      1     1        1
4     1      1     1        1
5     1      1     1        1
6     1      1     1        1
7     1      1     1        1</code></pre>
</div>
</div>
</section>
<section id="selecting-variables-that-end-with-a-digit-using-d" class="level5">
<h5 class="anchored" data-anchor-id="selecting-variables-that-end-with-a-digit-using-d"><strong>Selecting variables that end with a digit using <code>"\\d$"</code></strong></h5>
<p><code>\\d$</code> will grab all variables ending in a digit (<code>$</code> means <em>at the end</em>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_1    =</span> <span class="dv">1</span>,</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">var_11   =</span> <span class="dv">1</span>,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">var_3    =</span> <span class="dv">1</span>,</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">var1_var =</span> <span class="dv">1</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">|&gt;</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">d$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  var_1 var_11 var_3
1     1      1     1
2     1      1     1
3     1      1     1
4     1      1     1
5     1      1     1
6     1      1     1
7     1      1     1</code></pre>
</div>
</div>
</section>
</section>
<section id="selecting-variables-by-negation" class="level4">
<h4 class="anchored" data-anchor-id="selecting-variables-by-negation"><strong>Selecting variables by negation</strong></h4>
<p>You can also <em>negate</em> all regular expression matches if you want to exclude variable names ending with digits:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">var_1    =</span> <span class="dv">1</span>,</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">var_11   =</span> <span class="dv">1</span>,</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">var_3    =</span> <span class="dv">1</span>,</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">var1_var =</span> <span class="dv">1</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">|&gt;</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">d$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  var_1 var_11 var_3
1     1      1     1
2     1      1     1
3     1      1     1
4     1      1     1
5     1      1     1
6     1      1     1
7     1      1     1</code></pre>
</div>
</div>
<p><strong>Note:</strong> The functions will return lowercase and uppercase variable name matches because the default behavior is <code>ignore.case = TRUE</code>. Set to <code>FALSE</code> if you want to perform precise surgery on the variables.</p>
</section>
</section>
<section id="selecting-and-selecting-out-variables-by-type" class="level3">
<h3 class="anchored" data-anchor-id="selecting-and-selecting-out-variables-by-type"><strong>Selecting and Selecting Out Variables by Type</strong></h3>
<p>A very useful function for selecting variables by type is from the <strong><code>{tidyselect}</code></strong> library, <code>tidyselect::where()</code>. Examine how it works.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(where)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It has one main parameter, <code>fn</code> to which you pass another function. <code>where()</code> will return variables for which the function argument returns <code>TRUE</code>. Some common functions one might wish to pass as arguments to <code>fn</code> include <code>is.numeric()</code> for numeric columns, <code>is.character()</code> for character/string columns, or <code>is.factor()</code> for factor columns. For all of these, the <code>is.</code> part of the function informs you that the function is asking whether something <em>is</em> that type.</p>
<p>For example,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>The complement to <code>is.*()</code> is <code>as.*()</code> which is used to convert vectors. Convert, then check.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>One trickly part to using <code>where()</code> is that you cannot include the <code>()</code> for the function. Instead, we need to drop those off. Let’s try this with the data frame.</p>
<p>Select variables that are numeric:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id Age
1 100  25
2 101  33
3 102  27
4 103  40
5 104  44
6 100  25
7 105  40</code></pre>
</div>
</div>
<p>Now, <code>select()</code> will return only the numeric columns.</p>
<p>Select variables that are NOT numeric:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Sex Renting
1    male     yes
2  female    &lt;NA&gt;
3    Male     yes
4    &lt;NA&gt;    &lt;NA&gt;
5     man      no
6    male     yes
7 neither     yes</code></pre>
</div>
</div>
<p>Select variables that are character:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Sex Renting
1    male     yes
2  female    &lt;NA&gt;
3    Male     yes
4    &lt;NA&gt;    &lt;NA&gt;
5     man      no
6    male     yes
7 neither     yes</code></pre>
</div>
</div>
<p>Select variables that are NOT character:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id Age
1 100  25
2 101  33
3 102  27
4 103  40
5 104  44
6 100  25
7 105  40</code></pre>
</div>
</div>
<p>Select variables that are logical (<code>TRUE</code> to <code>FALSE</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.logical))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data frame with 0 columns and 7 rows</code></pre>
</div>
</div>
<p>Select variables that are NOT logical (<code>TRUE</code> to <code>FALSE</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">where</span>(is.logical))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="creatingmutating-variables" class="level1">
<h1><strong>Creating/Mutating Variables</strong></h1>
<p>When we want to add new variables or modify existing ones, we will use <code>mutate()</code>. Before using the function, review what it does using <code>?mutate</code>.</p>
<pre class="{,r}"><code>mutate(
  .data,
  ...,
  .by = NULL,
  .keep = c("all", "used", "unused", "none"),
  .before = NULL,
  .after = NULL
)</code></pre>
<p><strong>Parameters/Arguments:</strong></p>
<ul>
<li><code>.data</code>: a data frame</li>
<li><code>...</code>: name-value pairs; name is the name of the column and the value would be the value or function used</li>
</ul>
<p>Let’s start with a constant and move up from there.</p>
<section id="creatingmutating-a-constant-value" class="level2">
<h2 class="anchored" data-anchor-id="creatingmutating-a-constant-value"><strong>Creating/Mutating A Constant Value</strong></h2>
<p>Let’s create a new variable, <code>new_var</code> and set it equal to <code>1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var1
Alabama          13.2     236       58 21.2        1
Alaska           10.0     263       48 44.5        1
Arizona           8.1     294       80 31.0        1
Arkansas          8.8     190       50 19.5        1
California        9.0     276       91 40.6        1
Colorado          7.9     204       78 38.7        1
Connecticut       3.3     110       77 11.1        1
Delaware          5.9     238       72 15.8        1
Florida          15.4     335       80 31.9        1
Georgia          17.4     211       60 25.8        1
Hawaii            5.3      46       83 20.2        1
Idaho             2.6     120       54 14.2        1
Illinois         10.4     249       83 24.0        1
Indiana           7.2     113       65 21.0        1
Iowa              2.2      56       57 11.3        1
Kansas            6.0     115       66 18.0        1
Kentucky          9.7     109       52 16.3        1
Louisiana        15.4     249       66 22.2        1
Maine             2.1      83       51  7.8        1
Maryland         11.3     300       67 27.8        1
Massachusetts     4.4     149       85 16.3        1
Michigan         12.1     255       74 35.1        1
Minnesota         2.7      72       66 14.9        1
Mississippi      16.1     259       44 17.1        1
Missouri          9.0     178       70 28.2        1
Montana           6.0     109       53 16.4        1
Nebraska          4.3     102       62 16.5        1
Nevada           12.2     252       81 46.0        1
New Hampshire     2.1      57       56  9.5        1
New Jersey        7.4     159       89 18.8        1
New Mexico       11.4     285       70 32.1        1
New York         11.1     254       86 26.1        1
North Carolina   13.0     337       45 16.1        1
North Dakota      0.8      45       44  7.3        1
Ohio              7.3     120       75 21.4        1
Oklahoma          6.6     151       68 20.0        1
Oregon            4.9     159       67 29.3        1
Pennsylvania      6.3     106       72 14.9        1
Rhode Island      3.4     174       87  8.3        1
South Carolina   14.4     279       48 22.5        1
South Dakota      3.8      86       45 12.8        1
Tennessee        13.2     188       59 26.9        1
Texas            12.7     201       80 25.5        1
Utah              3.2     120       80 22.9        1
Vermont           2.2      48       32 11.2        1
Virginia          8.5     156       63 20.7        1
Washington        4.0     145       73 26.2        1
West Virginia     5.7      81       39  9.3        1
Wisconsin         2.6      53       66 10.8        1
Wyoming           6.8     161       60 15.6        1</code></pre>
</div>
</div>
<p>To mutate more than one variable, you can add a new name-value pair as a new argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">1</span>,</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">new_var2 =</span> <span class="dv">9999</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var1 new_var2
Alabama          13.2     236       58 21.2        1     9999
Alaska           10.0     263       48 44.5        1     9999
Arizona           8.1     294       80 31.0        1     9999
Arkansas          8.8     190       50 19.5        1     9999
California        9.0     276       91 40.6        1     9999
Colorado          7.9     204       78 38.7        1     9999
Connecticut       3.3     110       77 11.1        1     9999
Delaware          5.9     238       72 15.8        1     9999
Florida          15.4     335       80 31.9        1     9999
Georgia          17.4     211       60 25.8        1     9999
Hawaii            5.3      46       83 20.2        1     9999
Idaho             2.6     120       54 14.2        1     9999
Illinois         10.4     249       83 24.0        1     9999
Indiana           7.2     113       65 21.0        1     9999
Iowa              2.2      56       57 11.3        1     9999
Kansas            6.0     115       66 18.0        1     9999
Kentucky          9.7     109       52 16.3        1     9999
Louisiana        15.4     249       66 22.2        1     9999
Maine             2.1      83       51  7.8        1     9999
Maryland         11.3     300       67 27.8        1     9999
Massachusetts     4.4     149       85 16.3        1     9999
Michigan         12.1     255       74 35.1        1     9999
Minnesota         2.7      72       66 14.9        1     9999
Mississippi      16.1     259       44 17.1        1     9999
Missouri          9.0     178       70 28.2        1     9999
Montana           6.0     109       53 16.4        1     9999
Nebraska          4.3     102       62 16.5        1     9999
Nevada           12.2     252       81 46.0        1     9999
New Hampshire     2.1      57       56  9.5        1     9999
New Jersey        7.4     159       89 18.8        1     9999
New Mexico       11.4     285       70 32.1        1     9999
New York         11.1     254       86 26.1        1     9999
North Carolina   13.0     337       45 16.1        1     9999
North Dakota      0.8      45       44  7.3        1     9999
Ohio              7.3     120       75 21.4        1     9999
Oklahoma          6.6     151       68 20.0        1     9999
Oregon            4.9     159       67 29.3        1     9999
Pennsylvania      6.3     106       72 14.9        1     9999
Rhode Island      3.4     174       87  8.3        1     9999
South Carolina   14.4     279       48 22.5        1     9999
South Dakota      3.8      86       45 12.8        1     9999
Tennessee        13.2     188       59 26.9        1     9999
Texas            12.7     201       80 25.5        1     9999
Utah              3.2     120       80 22.9        1     9999
Vermont           2.2      48       32 11.2        1     9999
Virginia          8.5     156       63 20.7        1     9999
Washington        4.0     145       73 26.2        1     9999
West Virginia     5.7      81       39  9.3        1     9999
Wisconsin         2.6      53       66 10.8        1     9999
Wyoming           6.8     161       60 15.6        1     9999</code></pre>
</div>
</div>
<p>Or you can add a new <code>mutate()</code> by piping:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  <span class="co"># add the variable </span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">9999</span>)  <span class="co"># then add another variable </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var1
Alabama          13.2     236       58 21.2     9999
Alaska           10.0     263       48 44.5     9999
Arizona           8.1     294       80 31.0     9999
Arkansas          8.8     190       50 19.5     9999
California        9.0     276       91 40.6     9999
Colorado          7.9     204       78 38.7     9999
Connecticut       3.3     110       77 11.1     9999
Delaware          5.9     238       72 15.8     9999
Florida          15.4     335       80 31.9     9999
Georgia          17.4     211       60 25.8     9999
Hawaii            5.3      46       83 20.2     9999
Idaho             2.6     120       54 14.2     9999
Illinois         10.4     249       83 24.0     9999
Indiana           7.2     113       65 21.0     9999
Iowa              2.2      56       57 11.3     9999
Kansas            6.0     115       66 18.0     9999
Kentucky          9.7     109       52 16.3     9999
Louisiana        15.4     249       66 22.2     9999
Maine             2.1      83       51  7.8     9999
Maryland         11.3     300       67 27.8     9999
Massachusetts     4.4     149       85 16.3     9999
Michigan         12.1     255       74 35.1     9999
Minnesota         2.7      72       66 14.9     9999
Mississippi      16.1     259       44 17.1     9999
Missouri          9.0     178       70 28.2     9999
Montana           6.0     109       53 16.4     9999
Nebraska          4.3     102       62 16.5     9999
Nevada           12.2     252       81 46.0     9999
New Hampshire     2.1      57       56  9.5     9999
New Jersey        7.4     159       89 18.8     9999
New Mexico       11.4     285       70 32.1     9999
New York         11.1     254       86 26.1     9999
North Carolina   13.0     337       45 16.1     9999
North Dakota      0.8      45       44  7.3     9999
Ohio              7.3     120       75 21.4     9999
Oklahoma          6.6     151       68 20.0     9999
Oregon            4.9     159       67 29.3     9999
Pennsylvania      6.3     106       72 14.9     9999
Rhode Island      3.4     174       87  8.3     9999
South Carolina   14.4     279       48 22.5     9999
South Dakota      3.8      86       45 12.8     9999
Tennessee        13.2     188       59 26.9     9999
Texas            12.7     201       80 25.5     9999
Utah              3.2     120       80 22.9     9999
Vermont           2.2      48       32 11.2     9999
Virginia          8.5     156       63 20.7     9999
Washington        4.0     145       73 26.2     9999
West Virginia     5.7      81       39  9.3     9999
Wisconsin         2.6      53       66 10.8     9999
Wyoming           6.8     161       60 15.6     9999</code></pre>
</div>
</div>
<p>Whatever your approach, keep the variable creation on separate lines. Don’t put both variable specification on the same line just to same space as seen here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">1</span>, <span class="at">new_var1 =</span> <span class="dv">9999</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var1
Alabama          13.2     236       58 21.2     9999
Alaska           10.0     263       48 44.5     9999
Arizona           8.1     294       80 31.0     9999
Arkansas          8.8     190       50 19.5     9999
California        9.0     276       91 40.6     9999
Colorado          7.9     204       78 38.7     9999
Connecticut       3.3     110       77 11.1     9999
Delaware          5.9     238       72 15.8     9999
Florida          15.4     335       80 31.9     9999
Georgia          17.4     211       60 25.8     9999
Hawaii            5.3      46       83 20.2     9999
Idaho             2.6     120       54 14.2     9999
Illinois         10.4     249       83 24.0     9999
Indiana           7.2     113       65 21.0     9999
Iowa              2.2      56       57 11.3     9999
Kansas            6.0     115       66 18.0     9999
Kentucky          9.7     109       52 16.3     9999
Louisiana        15.4     249       66 22.2     9999
Maine             2.1      83       51  7.8     9999
Maryland         11.3     300       67 27.8     9999
Massachusetts     4.4     149       85 16.3     9999
Michigan         12.1     255       74 35.1     9999
Minnesota         2.7      72       66 14.9     9999
Mississippi      16.1     259       44 17.1     9999
Missouri          9.0     178       70 28.2     9999
Montana           6.0     109       53 16.4     9999
Nebraska          4.3     102       62 16.5     9999
Nevada           12.2     252       81 46.0     9999
New Hampshire     2.1      57       56  9.5     9999
New Jersey        7.4     159       89 18.8     9999
New Mexico       11.4     285       70 32.1     9999
New York         11.1     254       86 26.1     9999
North Carolina   13.0     337       45 16.1     9999
North Dakota      0.8      45       44  7.3     9999
Ohio              7.3     120       75 21.4     9999
Oklahoma          6.6     151       68 20.0     9999
Oregon            4.9     159       67 29.3     9999
Pennsylvania      6.3     106       72 14.9     9999
Rhode Island      3.4     174       87  8.3     9999
South Carolina   14.4     279       48 22.5     9999
South Dakota      3.8      86       45 12.8     9999
Tennessee        13.2     188       59 26.9     9999
Texas            12.7     201       80 25.5     9999
Utah              3.2     120       80 22.9     9999
Vermont           2.2      48       32 11.2     9999
Virginia          8.5     156       63 20.7     9999
Washington        4.0     145       73 26.2     9999
West Virginia     5.7      81       39  9.3     9999
Wisconsin         2.6      53       66 10.8     9999
Wyoming           6.8     161       60 15.6     9999</code></pre>
</div>
</div>
<p>Although there is nothing technically incorrect with doing so, (1) this is harder to read, (2) the <code>R</code> community won’t like it, and importantly (3) it is less flexible when you want to temporarily comment out a line of your code as seen here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(new_var1 = 1) |&gt;  # add the variable </span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="dv">9999</span>)  <span class="co"># then add another variable </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var1
Alabama          13.2     236       58 21.2     9999
Alaska           10.0     263       48 44.5     9999
Arizona           8.1     294       80 31.0     9999
Arkansas          8.8     190       50 19.5     9999
California        9.0     276       91 40.6     9999
Colorado          7.9     204       78 38.7     9999
Connecticut       3.3     110       77 11.1     9999
Delaware          5.9     238       72 15.8     9999
Florida          15.4     335       80 31.9     9999
Georgia          17.4     211       60 25.8     9999
Hawaii            5.3      46       83 20.2     9999
Idaho             2.6     120       54 14.2     9999
Illinois         10.4     249       83 24.0     9999
Indiana           7.2     113       65 21.0     9999
Iowa              2.2      56       57 11.3     9999
Kansas            6.0     115       66 18.0     9999
Kentucky          9.7     109       52 16.3     9999
Louisiana        15.4     249       66 22.2     9999
Maine             2.1      83       51  7.8     9999
Maryland         11.3     300       67 27.8     9999
Massachusetts     4.4     149       85 16.3     9999
Michigan         12.1     255       74 35.1     9999
Minnesota         2.7      72       66 14.9     9999
Mississippi      16.1     259       44 17.1     9999
Missouri          9.0     178       70 28.2     9999
Montana           6.0     109       53 16.4     9999
Nebraska          4.3     102       62 16.5     9999
Nevada           12.2     252       81 46.0     9999
New Hampshire     2.1      57       56  9.5     9999
New Jersey        7.4     159       89 18.8     9999
New Mexico       11.4     285       70 32.1     9999
New York         11.1     254       86 26.1     9999
North Carolina   13.0     337       45 16.1     9999
North Dakota      0.8      45       44  7.3     9999
Ohio              7.3     120       75 21.4     9999
Oklahoma          6.6     151       68 20.0     9999
Oregon            4.9     159       67 29.3     9999
Pennsylvania      6.3     106       72 14.9     9999
Rhode Island      3.4     174       87  8.3     9999
South Carolina   14.4     279       48 22.5     9999
South Dakota      3.8      86       45 12.8     9999
Tennessee        13.2     188       59 26.9     9999
Texas            12.7     201       80 25.5     9999
Utah              3.2     120       80 22.9     9999
Vermont           2.2      48       32 11.2     9999
Virginia          8.5     156       63 20.7     9999
Washington        4.0     145       73 26.2     9999
West Virginia     5.7      81       39  9.3     9999
Wisconsin         2.6      53       66 10.8     9999
Wyoming           6.8     161       60 15.6     9999</code></pre>
</div>
</div>
<p>Same for:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="co">#new_var1 = 1,</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">new_var2 =</span> <span class="dv">9999</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var2
Alabama          13.2     236       58 21.2     9999
Alaska           10.0     263       48 44.5     9999
Arizona           8.1     294       80 31.0     9999
Arkansas          8.8     190       50 19.5     9999
California        9.0     276       91 40.6     9999
Colorado          7.9     204       78 38.7     9999
Connecticut       3.3     110       77 11.1     9999
Delaware          5.9     238       72 15.8     9999
Florida          15.4     335       80 31.9     9999
Georgia          17.4     211       60 25.8     9999
Hawaii            5.3      46       83 20.2     9999
Idaho             2.6     120       54 14.2     9999
Illinois         10.4     249       83 24.0     9999
Indiana           7.2     113       65 21.0     9999
Iowa              2.2      56       57 11.3     9999
Kansas            6.0     115       66 18.0     9999
Kentucky          9.7     109       52 16.3     9999
Louisiana        15.4     249       66 22.2     9999
Maine             2.1      83       51  7.8     9999
Maryland         11.3     300       67 27.8     9999
Massachusetts     4.4     149       85 16.3     9999
Michigan         12.1     255       74 35.1     9999
Minnesota         2.7      72       66 14.9     9999
Mississippi      16.1     259       44 17.1     9999
Missouri          9.0     178       70 28.2     9999
Montana           6.0     109       53 16.4     9999
Nebraska          4.3     102       62 16.5     9999
Nevada           12.2     252       81 46.0     9999
New Hampshire     2.1      57       56  9.5     9999
New Jersey        7.4     159       89 18.8     9999
New Mexico       11.4     285       70 32.1     9999
New York         11.1     254       86 26.1     9999
North Carolina   13.0     337       45 16.1     9999
North Dakota      0.8      45       44  7.3     9999
Ohio              7.3     120       75 21.4     9999
Oklahoma          6.6     151       68 20.0     9999
Oregon            4.9     159       67 29.3     9999
Pennsylvania      6.3     106       72 14.9     9999
Rhode Island      3.4     174       87  8.3     9999
South Carolina   14.4     279       48 22.5     9999
South Dakota      3.8      86       45 12.8     9999
Tennessee        13.2     188       59 26.9     9999
Texas            12.7     201       80 25.5     9999
Utah              3.2     120       80 22.9     9999
Vermont           2.2      48       32 11.2     9999
Virginia          8.5     156       63 20.7     9999
Washington        4.0     145       73 26.2     9999
West Virginia     5.7      81       39  9.3     9999
Wisconsin         2.6      53       66 10.8     9999
Wyoming           6.8     161       60 15.6     9999</code></pre>
</div>
</div>
</section>
<section id="creatingmutating-a-constant-character" class="level2">
<h2 class="anchored" data-anchor-id="creatingmutating-a-constant-character"><strong>Creating/Mutating A Constant Character</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var1 =</span> <span class="st">"Below Average"</span>,</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape      new_var1
Alabama          13.2     236       58 21.2 Below Average
Alaska           10.0     263       48 44.5 Below Average
Arizona           8.1     294       80 31.0 Below Average
Arkansas          8.8     190       50 19.5 Below Average
California        9.0     276       91 40.6 Below Average
Colorado          7.9     204       78 38.7 Below Average
Connecticut       3.3     110       77 11.1 Below Average
Delaware          5.9     238       72 15.8 Below Average
Florida          15.4     335       80 31.9 Below Average
Georgia          17.4     211       60 25.8 Below Average
Hawaii            5.3      46       83 20.2 Below Average
Idaho             2.6     120       54 14.2 Below Average
Illinois         10.4     249       83 24.0 Below Average
Indiana           7.2     113       65 21.0 Below Average
Iowa              2.2      56       57 11.3 Below Average
Kansas            6.0     115       66 18.0 Below Average
Kentucky          9.7     109       52 16.3 Below Average
Louisiana        15.4     249       66 22.2 Below Average
Maine             2.1      83       51  7.8 Below Average
Maryland         11.3     300       67 27.8 Below Average
Massachusetts     4.4     149       85 16.3 Below Average
Michigan         12.1     255       74 35.1 Below Average
Minnesota         2.7      72       66 14.9 Below Average
Mississippi      16.1     259       44 17.1 Below Average
Missouri          9.0     178       70 28.2 Below Average
Montana           6.0     109       53 16.4 Below Average
Nebraska          4.3     102       62 16.5 Below Average
Nevada           12.2     252       81 46.0 Below Average
New Hampshire     2.1      57       56  9.5 Below Average
New Jersey        7.4     159       89 18.8 Below Average
New Mexico       11.4     285       70 32.1 Below Average
New York         11.1     254       86 26.1 Below Average
North Carolina   13.0     337       45 16.1 Below Average
North Dakota      0.8      45       44  7.3 Below Average
Ohio              7.3     120       75 21.4 Below Average
Oklahoma          6.6     151       68 20.0 Below Average
Oregon            4.9     159       67 29.3 Below Average
Pennsylvania      6.3     106       72 14.9 Below Average
Rhode Island      3.4     174       87  8.3 Below Average
South Carolina   14.4     279       48 22.5 Below Average
South Dakota      3.8      86       45 12.8 Below Average
Tennessee        13.2     188       59 26.9 Below Average
Texas            12.7     201       80 25.5 Below Average
Utah              3.2     120       80 22.9 Below Average
Vermont           2.2      48       32 11.2 Below Average
Virginia          8.5     156       63 20.7 Below Average
Washington        4.0     145       73 26.2 Below Average
West Virginia     5.7      81       39  9.3 Below Average
Wisconsin         2.6      53       66 10.8 Below Average
Wyoming           6.8     161       60 15.6 Below Average</code></pre>
</div>
</div>
</section>
<section id="creatingmutating-a-logical-object" class="level2">
<h2 class="anchored" data-anchor-id="creatingmutating-a-logical-object"><strong>Creating/Mutating A Logical Object</strong></h2>
<p>Logical objects are <code>TRUE</code> or <code>FALSE</code>. We can perform the logical test by asking whether <code>Assault &gt; Murder</code>. If the <code>Assault</code> value for a row is greater than the <code>Murder</code> value, <code>TRUE</code> will be returned, otherwise <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_var =</span> Assault <span class="sc">&gt;</span> Murder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape new_var
Alabama          13.2     236       58 21.2    TRUE
Alaska           10.0     263       48 44.5    TRUE
Arizona           8.1     294       80 31.0    TRUE
Arkansas          8.8     190       50 19.5    TRUE
California        9.0     276       91 40.6    TRUE
Colorado          7.9     204       78 38.7    TRUE
Connecticut       3.3     110       77 11.1    TRUE
Delaware          5.9     238       72 15.8    TRUE
Florida          15.4     335       80 31.9    TRUE
Georgia          17.4     211       60 25.8    TRUE
Hawaii            5.3      46       83 20.2    TRUE
Idaho             2.6     120       54 14.2    TRUE
Illinois         10.4     249       83 24.0    TRUE
Indiana           7.2     113       65 21.0    TRUE
Iowa              2.2      56       57 11.3    TRUE
Kansas            6.0     115       66 18.0    TRUE
Kentucky          9.7     109       52 16.3    TRUE
Louisiana        15.4     249       66 22.2    TRUE
Maine             2.1      83       51  7.8    TRUE
Maryland         11.3     300       67 27.8    TRUE
Massachusetts     4.4     149       85 16.3    TRUE
Michigan         12.1     255       74 35.1    TRUE
Minnesota         2.7      72       66 14.9    TRUE
Mississippi      16.1     259       44 17.1    TRUE
Missouri          9.0     178       70 28.2    TRUE
Montana           6.0     109       53 16.4    TRUE
Nebraska          4.3     102       62 16.5    TRUE
Nevada           12.2     252       81 46.0    TRUE
New Hampshire     2.1      57       56  9.5    TRUE
New Jersey        7.4     159       89 18.8    TRUE
New Mexico       11.4     285       70 32.1    TRUE
New York         11.1     254       86 26.1    TRUE
North Carolina   13.0     337       45 16.1    TRUE
North Dakota      0.8      45       44  7.3    TRUE
Ohio              7.3     120       75 21.4    TRUE
Oklahoma          6.6     151       68 20.0    TRUE
Oregon            4.9     159       67 29.3    TRUE
Pennsylvania      6.3     106       72 14.9    TRUE
Rhode Island      3.4     174       87  8.3    TRUE
South Carolina   14.4     279       48 22.5    TRUE
South Dakota      3.8      86       45 12.8    TRUE
Tennessee        13.2     188       59 26.9    TRUE
Texas            12.7     201       80 25.5    TRUE
Utah              3.2     120       80 22.9    TRUE
Vermont           2.2      48       32 11.2    TRUE
Virginia          8.5     156       63 20.7    TRUE
Washington        4.0     145       73 26.2    TRUE
West Virginia     5.7      81       39  9.3    TRUE
Wisconsin         2.6      53       66 10.8    TRUE
Wyoming           6.8     161       60 15.6    TRUE</code></pre>
</div>
</div>
<p>We see that all states (rows) have more assaults than murders. No surprise.</p>
</section>
<section id="creatingmutating-based-on-function" class="level2">
<h2 class="anchored" data-anchor-id="creatingmutating-based-on-function"><strong>Creating/Mutating Based on Function</strong></h2>
<p>Here, the name value pair will contain a function. For example, let’s create a variable based on the <code>mean()</code> of a variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Mean_Assault =</span> <span class="fu">mean</span>(Assault))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape Mean_Assault
Alabama          13.2     236       58 21.2       170.76
Alaska           10.0     263       48 44.5       170.76
Arizona           8.1     294       80 31.0       170.76
Arkansas          8.8     190       50 19.5       170.76
California        9.0     276       91 40.6       170.76
Colorado          7.9     204       78 38.7       170.76
Connecticut       3.3     110       77 11.1       170.76
Delaware          5.9     238       72 15.8       170.76
Florida          15.4     335       80 31.9       170.76
Georgia          17.4     211       60 25.8       170.76
Hawaii            5.3      46       83 20.2       170.76
Idaho             2.6     120       54 14.2       170.76
Illinois         10.4     249       83 24.0       170.76
Indiana           7.2     113       65 21.0       170.76
Iowa              2.2      56       57 11.3       170.76
Kansas            6.0     115       66 18.0       170.76
Kentucky          9.7     109       52 16.3       170.76
Louisiana        15.4     249       66 22.2       170.76
Maine             2.1      83       51  7.8       170.76
Maryland         11.3     300       67 27.8       170.76
Massachusetts     4.4     149       85 16.3       170.76
Michigan         12.1     255       74 35.1       170.76
Minnesota         2.7      72       66 14.9       170.76
Mississippi      16.1     259       44 17.1       170.76
Missouri          9.0     178       70 28.2       170.76
Montana           6.0     109       53 16.4       170.76
Nebraska          4.3     102       62 16.5       170.76
Nevada           12.2     252       81 46.0       170.76
New Hampshire     2.1      57       56  9.5       170.76
New Jersey        7.4     159       89 18.8       170.76
New Mexico       11.4     285       70 32.1       170.76
New York         11.1     254       86 26.1       170.76
North Carolina   13.0     337       45 16.1       170.76
North Dakota      0.8      45       44  7.3       170.76
Ohio              7.3     120       75 21.4       170.76
Oklahoma          6.6     151       68 20.0       170.76
Oregon            4.9     159       67 29.3       170.76
Pennsylvania      6.3     106       72 14.9       170.76
Rhode Island      3.4     174       87  8.3       170.76
South Carolina   14.4     279       48 22.5       170.76
South Dakota      3.8      86       45 12.8       170.76
Tennessee        13.2     188       59 26.9       170.76
Texas            12.7     201       80 25.5       170.76
Utah              3.2     120       80 22.9       170.76
Vermont           2.2      48       32 11.2       170.76
Virginia          8.5     156       63 20.7       170.76
Washington        4.0     145       73 26.2       170.76
West Virginia     5.7      81       39  9.3       170.76
Wisconsin         2.6      53       66 10.8       170.76
Wyoming           6.8     161       60 15.6       170.76</code></pre>
</div>
</div>
<p>Notice that the new column contains the mean for all rows.</p>
<p>We may also wish to categorize rows based on their relative <code>Assault</code> data. How about assault lower than the mean assault?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Lower_than_Mean_Assault =</span> Assault <span class="sc">&lt;</span> <span class="fu">mean</span>(Assault))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape Lower_than_Mean_Assault
Alabama          13.2     236       58 21.2                   FALSE
Alaska           10.0     263       48 44.5                   FALSE
Arizona           8.1     294       80 31.0                   FALSE
Arkansas          8.8     190       50 19.5                   FALSE
California        9.0     276       91 40.6                   FALSE
Colorado          7.9     204       78 38.7                   FALSE
Connecticut       3.3     110       77 11.1                    TRUE
Delaware          5.9     238       72 15.8                   FALSE
Florida          15.4     335       80 31.9                   FALSE
Georgia          17.4     211       60 25.8                   FALSE
Hawaii            5.3      46       83 20.2                    TRUE
Idaho             2.6     120       54 14.2                    TRUE
Illinois         10.4     249       83 24.0                   FALSE
Indiana           7.2     113       65 21.0                    TRUE
Iowa              2.2      56       57 11.3                    TRUE
Kansas            6.0     115       66 18.0                    TRUE
Kentucky          9.7     109       52 16.3                    TRUE
Louisiana        15.4     249       66 22.2                   FALSE
Maine             2.1      83       51  7.8                    TRUE
Maryland         11.3     300       67 27.8                   FALSE
Massachusetts     4.4     149       85 16.3                    TRUE
Michigan         12.1     255       74 35.1                   FALSE
Minnesota         2.7      72       66 14.9                    TRUE
Mississippi      16.1     259       44 17.1                   FALSE
Missouri          9.0     178       70 28.2                   FALSE
Montana           6.0     109       53 16.4                    TRUE
Nebraska          4.3     102       62 16.5                    TRUE
Nevada           12.2     252       81 46.0                   FALSE
New Hampshire     2.1      57       56  9.5                    TRUE
New Jersey        7.4     159       89 18.8                    TRUE
New Mexico       11.4     285       70 32.1                   FALSE
New York         11.1     254       86 26.1                   FALSE
North Carolina   13.0     337       45 16.1                   FALSE
North Dakota      0.8      45       44  7.3                    TRUE
Ohio              7.3     120       75 21.4                    TRUE
Oklahoma          6.6     151       68 20.0                    TRUE
Oregon            4.9     159       67 29.3                    TRUE
Pennsylvania      6.3     106       72 14.9                    TRUE
Rhode Island      3.4     174       87  8.3                   FALSE
South Carolina   14.4     279       48 22.5                   FALSE
South Dakota      3.8      86       45 12.8                    TRUE
Tennessee        13.2     188       59 26.9                   FALSE
Texas            12.7     201       80 25.5                   FALSE
Utah              3.2     120       80 22.9                    TRUE
Vermont           2.2      48       32 11.2                    TRUE
Virginia          8.5     156       63 20.7                    TRUE
Washington        4.0     145       73 26.2                    TRUE
West Virginia     5.7      81       39  9.3                    TRUE
Wisconsin         2.6      53       66 10.8                    TRUE
Wyoming           6.8     161       60 15.6                    TRUE</code></pre>
</div>
</div>
<p><code>TRUE</code> and <code>False</code> make terrible variable levels, however. Using <code>ifelse()</code>, we will specify conditions for categorization. For example, make rows that are below the mean take on a value, <em>else/otherwise</em>, make the rows a different value.</p>
<p>Example:</p>
<p><code>ifelse(Assault &lt; Mean_Assault, "Below", "Equal or Above"))</code></p>
<p>If the <code>Assault</code> value is <code>&lt;</code> Mean_Assault, assign the row a value of <code>"Below"</code>, else, assign <code>"Equal or Above"</code>. Let’s use <code>ifelse()</code> to create a name-value pair</p>
<p><code>Relative_Assult = ifelse(Assault &lt; Mean_Assault, "Below", "Equal or Above"))</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Mean_Assault =</span> <span class="fu">mean</span>(Assault), </span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Relative_Assult =</span> <span class="fu">ifelse</span>(Assault <span class="sc">&lt;</span> Mean_Assault, <span class="st">"Below"</span>, <span class="st">"Equal or Above"</span>)</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape Mean_Assault Relative_Assult
Alabama          13.2     236       58 21.2       170.76  Equal or Above
Alaska           10.0     263       48 44.5       170.76  Equal or Above
Arizona           8.1     294       80 31.0       170.76  Equal or Above
Arkansas          8.8     190       50 19.5       170.76  Equal or Above
California        9.0     276       91 40.6       170.76  Equal or Above
Colorado          7.9     204       78 38.7       170.76  Equal or Above
Connecticut       3.3     110       77 11.1       170.76           Below
Delaware          5.9     238       72 15.8       170.76  Equal or Above
Florida          15.4     335       80 31.9       170.76  Equal or Above
Georgia          17.4     211       60 25.8       170.76  Equal or Above
Hawaii            5.3      46       83 20.2       170.76           Below
Idaho             2.6     120       54 14.2       170.76           Below
Illinois         10.4     249       83 24.0       170.76  Equal or Above
Indiana           7.2     113       65 21.0       170.76           Below
Iowa              2.2      56       57 11.3       170.76           Below
Kansas            6.0     115       66 18.0       170.76           Below
Kentucky          9.7     109       52 16.3       170.76           Below
Louisiana        15.4     249       66 22.2       170.76  Equal or Above
Maine             2.1      83       51  7.8       170.76           Below
Maryland         11.3     300       67 27.8       170.76  Equal or Above
Massachusetts     4.4     149       85 16.3       170.76           Below
Michigan         12.1     255       74 35.1       170.76  Equal or Above
Minnesota         2.7      72       66 14.9       170.76           Below
Mississippi      16.1     259       44 17.1       170.76  Equal or Above
Missouri          9.0     178       70 28.2       170.76  Equal or Above
Montana           6.0     109       53 16.4       170.76           Below
Nebraska          4.3     102       62 16.5       170.76           Below
Nevada           12.2     252       81 46.0       170.76  Equal or Above
New Hampshire     2.1      57       56  9.5       170.76           Below
New Jersey        7.4     159       89 18.8       170.76           Below
New Mexico       11.4     285       70 32.1       170.76  Equal or Above
New York         11.1     254       86 26.1       170.76  Equal or Above
North Carolina   13.0     337       45 16.1       170.76  Equal or Above
North Dakota      0.8      45       44  7.3       170.76           Below
Ohio              7.3     120       75 21.4       170.76           Below
Oklahoma          6.6     151       68 20.0       170.76           Below
Oregon            4.9     159       67 29.3       170.76           Below
Pennsylvania      6.3     106       72 14.9       170.76           Below
Rhode Island      3.4     174       87  8.3       170.76  Equal or Above
South Carolina   14.4     279       48 22.5       170.76  Equal or Above
South Dakota      3.8      86       45 12.8       170.76           Below
Tennessee        13.2     188       59 26.9       170.76  Equal or Above
Texas            12.7     201       80 25.5       170.76  Equal or Above
Utah              3.2     120       80 22.9       170.76           Below
Vermont           2.2      48       32 11.2       170.76           Below
Virginia          8.5     156       63 20.7       170.76           Below
Washington        4.0     145       73 26.2       170.76           Below
West Virginia     5.7      81       39  9.3       170.76           Below
Wisconsin         2.6      53       66 10.8       170.76           Below
Wyoming           6.8     161       60 15.6       170.76           Below</code></pre>
</div>
</div>
<p>Bu you could also combine the steps together:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Relative_Assult =</span> <span class="fu">ifelse</span>(Assault <span class="sc">&lt;</span> <span class="fu">mean</span>(Assault), <span class="st">"Below"</span>, <span class="st">"Equal or Above"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape Relative_Assult
Alabama          13.2     236       58 21.2  Equal or Above
Alaska           10.0     263       48 44.5  Equal or Above
Arizona           8.1     294       80 31.0  Equal or Above
Arkansas          8.8     190       50 19.5  Equal or Above
California        9.0     276       91 40.6  Equal or Above
Colorado          7.9     204       78 38.7  Equal or Above
Connecticut       3.3     110       77 11.1           Below
Delaware          5.9     238       72 15.8  Equal or Above
Florida          15.4     335       80 31.9  Equal or Above
Georgia          17.4     211       60 25.8  Equal or Above
Hawaii            5.3      46       83 20.2           Below
Idaho             2.6     120       54 14.2           Below
Illinois         10.4     249       83 24.0  Equal or Above
Indiana           7.2     113       65 21.0           Below
Iowa              2.2      56       57 11.3           Below
Kansas            6.0     115       66 18.0           Below
Kentucky          9.7     109       52 16.3           Below
Louisiana        15.4     249       66 22.2  Equal or Above
Maine             2.1      83       51  7.8           Below
Maryland         11.3     300       67 27.8  Equal or Above
Massachusetts     4.4     149       85 16.3           Below
Michigan         12.1     255       74 35.1  Equal or Above
Minnesota         2.7      72       66 14.9           Below
Mississippi      16.1     259       44 17.1  Equal or Above
Missouri          9.0     178       70 28.2  Equal or Above
Montana           6.0     109       53 16.4           Below
Nebraska          4.3     102       62 16.5           Below
Nevada           12.2     252       81 46.0  Equal or Above
New Hampshire     2.1      57       56  9.5           Below
New Jersey        7.4     159       89 18.8           Below
New Mexico       11.4     285       70 32.1  Equal or Above
New York         11.1     254       86 26.1  Equal or Above
North Carolina   13.0     337       45 16.1  Equal or Above
North Dakota      0.8      45       44  7.3           Below
Ohio              7.3     120       75 21.4           Below
Oklahoma          6.6     151       68 20.0           Below
Oregon            4.9     159       67 29.3           Below
Pennsylvania      6.3     106       72 14.9           Below
Rhode Island      3.4     174       87  8.3  Equal or Above
South Carolina   14.4     279       48 22.5  Equal or Above
South Dakota      3.8      86       45 12.8           Below
Tennessee        13.2     188       59 26.9  Equal or Above
Texas            12.7     201       80 25.5  Equal or Above
Utah              3.2     120       80 22.9           Below
Vermont           2.2      48       32 11.2           Below
Virginia          8.5     156       63 20.7           Below
Washington        4.0     145       73 26.2           Below
West Virginia     5.7      81       39  9.3           Below
Wisconsin         2.6      53       66 10.8           Below
Wyoming           6.8     161       60 15.6           Below</code></pre>
</div>
</div>
</section>
</section>
<section id="filtering-rows" class="level1">
<h1><strong>Filtering Rows</strong></h1>
<p>Data files are messy and as a result require cleaning. You will have missing rows, incorrect variable names, files with columns named the same, <code>NA</code>s, strings for numbers, duplicate rows of data, people who completed a survey twice, and all sorts of unimaginable and unbelievable data problems. So cleaning is important.</p>
<p>Whereas <strong>selecting</strong> is the processes of retaining variable columns, <strong>filtering</strong> is the process of retaining rows from a data set. For example, if you want your data frame to contain only individuals who are 20 or more years old, you would filter to retain them and remove others. If you want to explore data for only individuals from Kansas, you would filter rows to retain only them and remove all others.</p>
<p>Data frame manipulation may involve keeping only certain rows for data, for example, male or female respondents, male respondents, those who do not contain missing values (e.g., <code>NA</code>s) for a specific column variable, who are of a certain age (or born in in certain year), who are above (or below) some acceptable criterion, etc.</p>
<p>When a column variable has more than one value (e.g., check using <code>unique()</code> to determine the unique elements contained), you may wish to filter on some but not others.</p>
<p>You may even need to filter rows in a data frame that are distinct (e.g., not duplicate responses). This is often a good first step in order to determine the size of the usable data set. <code>dplyr::distinct()</code> makes de-duplicating easy as this function will return only distinct rows.</p>
<section id="understanding-filtering-operators" class="level2">
<h2 class="anchored" data-anchor-id="understanding-filtering-operators"><strong>Understanding Filtering Operators</strong></h2>
<p>We will filter data using <code>filter()</code> from <strong>{dplyr}</strong></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(.data, </span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>       ...</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Parameters/Arguments:</strong></p>
<ul>
<li><code>.data</code>: a data frame</li>
<li><code>...</code>: expressions that return a logical value (<code>TRUE</code> or <code>FALSE</code>)</li>
</ul>
<p><strong>NOTE::</strong> Filtering cases using the <code>filter()</code> verbs works by <strong>removing rows that do not match a specific criterion</strong> and then by returning the data frame that omits the mismatched condition. It keeps only rows that are <code>TRUE</code> (match) your specification.</p>
<p>Some useful filtering operators and functions include: <code>==</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&amp;</code>, <code>|</code>, <code>!</code>, <code>xor()</code>, <code>c()</code>, <code>is.na()</code>, <code>between()</code>, <code>near()</code>.</p>
</section>
<section id="filtering-using-filter" class="level2">
<h2 class="anchored" data-anchor-id="filtering-using-filter"><strong>Filtering Using <code>filter()</code></strong></h2>
<p>We will work with different data frames because the the nature of their contents.</p>
<p>What does the data frame look like again?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>DAT    <span class="co"># or print(DAT)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
<p>Row/Observations/Cases can be filtered to “include” only certain matched conditions or can be filtered to “exclude” by negating those matched conditions. If the column variable <code>Sex</code> is in the data frame and cases are <code>'male'</code>, <code>'men'</code>, <code>'female'</code>, <code>'women'</code>, <code>'neither'</code>, <code>NA</code>, etc., you can specify the column <code>Sex</code> variable and then the row matching condition(s).</p>
<section id="filtering-matches-to-a-specific-character-value" class="level3">
<h3 class="anchored" data-anchor-id="filtering-matches-to-a-specific-character-value"><strong>Filtering Matches to a Specific Character Value</strong></h3>
<p>The first argument in <code>filter()</code> is a data frame, and the function all <code>filter(DAT, Sex == 'female')</code> will filter the data frame named <code>DAT</code> to include rows for which the <code>sex</code> column equals <code>'female'</code>. In other words, <code>TRUE</code> rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(DAT, </span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>       Sex <span class="sc">==</span> <span class="st">'female'</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 101 female  33    &lt;NA&gt;</code></pre>
</div>
</div>
<p>Similarly, the function call <code>filter(DAT, Sex == 'male')</code> can be read “filter the data frame to include rows for which the value of <code>Sex == 'male'</code> is <code>TRUE</code>”.</p>
<p>More flexibly, however, you could specify a vector containing acceptable strings using <code>c()</code>. <code>filter(Sex %in% c('male'))</code> filters the rows to include only those for which the value for <code>sex</code> is in the string vector which includes a single string,<code>'male'</code> whereas <code>filter(Sex %in% c('male', 'Man'))</code> filters the rows to include only those for which the value for <code>Sex</code> is in the string vector which includes <code>'male'</code> and <code>'Man'</code>. Cases containing <code>'Male'</code>, <code>'Men'</code> (R is a case-sensitive language), or <code>'female'</code>, for example, will not be included in the returned data frame because they do not match values in the string vector.</p>
</section>
<section id="filtering-by-a-relative-value" class="level3">
<h3 class="anchored" data-anchor-id="filtering-by-a-relative-value"><strong>Filtering by a Relative Value</strong></h3>
<p>Let’s <code>|&gt;</code> the data frame to <code>filter()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Murder <span class="sc">&gt;</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape
Alabama          13.2     236       58 21.2
Florida          15.4     335       80 31.9
Georgia          17.4     211       60 25.8
Illinois         10.4     249       83 24.0
Louisiana        15.4     249       66 22.2
Maryland         11.3     300       67 27.8
Michigan         12.1     255       74 35.1
Mississippi      16.1     259       44 17.1
Nevada           12.2     252       81 46.0
New Mexico       11.4     285       70 32.1
New York         11.1     254       86 26.1
North Carolina   13.0     337       45 16.1
South Carolina   14.4     279       48 22.5
Tennessee        13.2     188       59 26.9
Texas            12.7     201       80 25.5</code></pre>
</div>
</div>
<p>The rows with <code>Murder</code> above 10 will be retained (they are <code>TRUE</code>), others removed (they are <code>FALSE</code>).</p>
</section>
<section id="filtering-by-a-specific-value" class="level3">
<h3 class="anchored" data-anchor-id="filtering-by-a-specific-value"><strong>Filtering by a Specific Value</strong></h3>
<p>To <code>filter()</code> by a specific value rather than a relative value, you will need to perform a test of equality using the <code>==</code> operator.</p>
<p>For some quick examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Hello"</span> <span class="sc">==</span> <span class="st">"Hello"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Hello"</span> <span class="sc">==</span> <span class="st">"hello"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Because <code>filter()</code> operates on <em>rows</em> of data frames, the test of equality to a value is performed on each row. When the test is <code>TRUE</code>, that row will be retained.</p>
<p>Get rows for which <code>Murder == 12.1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Murder <span class="sc">==</span> <span class="fl">12.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Murder Assault UrbanPop Rape
Michigan   12.1     255       74 35.1</code></pre>
</div>
</div>
<p>Using a previous example with this data set, we can filter based on a character variable if we had one. Let’s add one.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Relative_Murder =</span> <span class="fu">ifelse</span>(Murder <span class="sc">&lt;</span> <span class="fu">mean</span>(Murder), <span class="st">"Below"</span>, <span class="st">"Equal or Above"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Relative_Murder <span class="sc">==</span> <span class="st">"Below"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Murder Assault UrbanPop Rape Relative_Murder
Connecticut      3.3     110       77 11.1           Below
Delaware         5.9     238       72 15.8           Below
Hawaii           5.3      46       83 20.2           Below
Idaho            2.6     120       54 14.2           Below
Indiana          7.2     113       65 21.0           Below
Iowa             2.2      56       57 11.3           Below
Kansas           6.0     115       66 18.0           Below
Maine            2.1      83       51  7.8           Below
Massachusetts    4.4     149       85 16.3           Below
Minnesota        2.7      72       66 14.9           Below
Montana          6.0     109       53 16.4           Below
Nebraska         4.3     102       62 16.5           Below
New Hampshire    2.1      57       56  9.5           Below
New Jersey       7.4     159       89 18.8           Below
North Dakota     0.8      45       44  7.3           Below
Ohio             7.3     120       75 21.4           Below
Oklahoma         6.6     151       68 20.0           Below
Oregon           4.9     159       67 29.3           Below
Pennsylvania     6.3     106       72 14.9           Below
Rhode Island     3.4     174       87  8.3           Below
South Dakota     3.8      86       45 12.8           Below
Utah             3.2     120       80 22.9           Below
Vermont          2.2      48       32 11.2           Below
Washington       4.0     145       73 26.2           Below
West Virginia    5.7      81       39  9.3           Below
Wisconsin        2.6      53       66 10.8           Below
Wyoming          6.8     161       60 15.6           Below</code></pre>
</div>
</div>
</section>
<section id="filtering-using-a-function" class="level3">
<h3 class="anchored" data-anchor-id="filtering-using-a-function"><strong>Filtering Using a Function</strong></h3>
<p>The <code>mean()</code> function will return the mean of a <em>vector</em>. We can <code>pull()</code> a variable from the data frame and pipe it to <code>mean()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Murder) <span class="sc">|&gt;</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.788</code></pre>
</div>
</div>
<p>Alternatively, use the <code>$</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(USArrests<span class="sc">$</span>Murder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.788</code></pre>
</div>
</div>
<p>We now see the mean is 7.788. We can filter the data frame to retain rows for which <code>Murder &gt; 7.788</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Murder <span class="sc">&gt;</span> <span class="fl">7.788</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape
Alabama          13.2     236       58 21.2
Alaska           10.0     263       48 44.5
Arizona           8.1     294       80 31.0
Arkansas          8.8     190       50 19.5
California        9.0     276       91 40.6
Colorado          7.9     204       78 38.7
Florida          15.4     335       80 31.9
Georgia          17.4     211       60 25.8
Illinois         10.4     249       83 24.0
Kentucky          9.7     109       52 16.3
Louisiana        15.4     249       66 22.2
Maryland         11.3     300       67 27.8
Michigan         12.1     255       74 35.1
Mississippi      16.1     259       44 17.1
Missouri          9.0     178       70 28.2
Nevada           12.2     252       81 46.0
New Mexico       11.4     285       70 32.1
New York         11.1     254       86 26.1
North Carolina   13.0     337       45 16.1
South Carolina   14.4     279       48 22.5
Tennessee        13.2     188       59 26.9
Texas            12.7     201       80 25.5
Virginia          8.5     156       63 20.7</code></pre>
</div>
</div>
<p>This approach, however, is not helpful when your data change. And even though you think your data will not change, updates to data, filtering of rows or cases, different cleaning methods, all have a high probability of changing the mean. Working smarter rather than harder involves ensuring that you circumvent such issues.</p>
<p><strong>Never hard code!</strong></p>
<p>Instead, use <code>mean()</code> to do this for us.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Murder <span class="sc">&gt;</span> <span class="fu">mean</span>(Murder))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape
Alabama          13.2     236       58 21.2
Alaska           10.0     263       48 44.5
Arizona           8.1     294       80 31.0
Arkansas          8.8     190       50 19.5
California        9.0     276       91 40.6
Colorado          7.9     204       78 38.7
Florida          15.4     335       80 31.9
Georgia          17.4     211       60 25.8
Illinois         10.4     249       83 24.0
Kentucky          9.7     109       52 16.3
Louisiana        15.4     249       66 22.2
Maryland         11.3     300       67 27.8
Michigan         12.1     255       74 35.1
Mississippi      16.1     259       44 17.1
Missouri          9.0     178       70 28.2
Nevada           12.2     252       81 46.0
New Mexico       11.4     285       70 32.1
New York         11.1     254       86 26.1
North Carolina   13.0     337       45 16.1
South Carolina   14.4     279       48 22.5
Tennessee        13.2     188       59 26.9
Texas            12.7     201       80 25.5
Virginia          8.5     156       63 20.7</code></pre>
</div>
</div>
<p>If you have been paying attention, you know that you need to understand how the functions you use work.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the usage section, you see that by default, <code>mean()</code> will <strong>not</strong> remove <code>NA</code> (missing) values from the vector.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, </span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">trim =</span> <span class="dv">0</span>, </span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">na.rm =</span> <span class="cn">FALSE</span>, </span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>     ...</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>     )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">88</span>, <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>The mean is clearly not <code>NA</code> but the function is operating just as it should. If you ever get an <code>NA</code> in your vector, the above code will not work. By default, <code>na.rm = FALSE</code>, which means that <code>NA</code> values will not be removed. If they exist, the mean will be returned as <code>NA</code>.</p>
<p>The smarter approach is to pass <code>TRUE</code> to the <code>na.rm</code> parameter (na.rm = na remove).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">88</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32.66667</code></pre>
</div>
</div>
<p>And for the data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>USArrests <span class="sc">|&gt;</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Murder <span class="sc">&gt;</span> <span class="fu">mean</span>(Murder, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Murder Assault UrbanPop Rape
Alabama          13.2     236       58 21.2
Alaska           10.0     263       48 44.5
Arizona           8.1     294       80 31.0
Arkansas          8.8     190       50 19.5
California        9.0     276       91 40.6
Colorado          7.9     204       78 38.7
Florida          15.4     335       80 31.9
Georgia          17.4     211       60 25.8
Illinois         10.4     249       83 24.0
Kentucky          9.7     109       52 16.3
Louisiana        15.4     249       66 22.2
Maryland         11.3     300       67 27.8
Michigan         12.1     255       74 35.1
Mississippi      16.1     259       44 17.1
Missouri          9.0     178       70 28.2
Nevada           12.2     252       81 46.0
New Mexico       11.4     285       70 32.1
New York         11.1     254       86 26.1
North Carolina   13.0     337       45 16.1
South Carolina   14.4     279       48 22.5
Tennessee        13.2     188       59 26.9
Texas            12.7     201       80 25.5
Virginia          8.5     156       63 20.7</code></pre>
</div>
</div>
<p>Notice changes here because there were not <code>NA</code> values in the variable but there could be at various times.</p>
</section>
</section>
</section>
<section id="filtering-missing-data-nas" class="level1">
<h1><strong>Filtering Missing Data (<code>NAs</code>)</strong></h1>
<p><code>is.na()</code> will return a logical vector for which <code>TRUE</code> represents there are missing values.</p>
<p>Try on the entire data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(DAT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Id   Sex   Age Renting
[1,] FALSE FALSE FALSE   FALSE
[2,] FALSE FALSE FALSE    TRUE
[3,] FALSE FALSE FALSE   FALSE
[4,] FALSE  TRUE FALSE    TRUE
[5,] FALSE FALSE FALSE   FALSE
[6,] FALSE FALSE FALSE   FALSE
[7,] FALSE FALSE FALSE   FALSE</code></pre>
</div>
</div>
<p>You can see that some columns contain cases/rows with <code>TRUE</code> indicating the cell contains <code>NA</code>.</p>
<p>WE will use the negation operator, <code>!</code>, to illustrate some filtering approaches. Because <code>filter()</code> will filter out <code>FALSE</code> cases and retain <code>TRUE</code> ones, so you may sometimes need to negate a function so that you keep the rows you want to keep.</p>
<ul>
<li><code>na.omit()</code>: removes rows with NAs</li>
<li><code>filter(is.na(column_name))</code>: keep rows with NA in specific variable</li>
<li><code>filter(!is.na(column_name))</code>: remove (don’t keep) rows with NA in specific variable</li>
<li><code>filter(., complete.cases(.))</code>: remove rows with NAs</li>
<li><code>filter(filter_complete_cases())</code>: remove rows with any NAs (custom function)</li>
</ul>
<section id="filter-using-na.omit" class="level2">
<h2 class="anchored" data-anchor-id="filter-using-na.omit"><strong>Filter using <code>na.omit()</code></strong></h2>
<p>Filter the entire data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()                <span class="co"># omit any rows with NAs </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
3 102    Male  27     yes
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
</section>
<section id="filter-using-is.na-and-is.na" class="level2">
<h2 class="anchored" data-anchor-id="filter-using-is.na-and-is.na"><strong>Filter using <code>is.na()</code> and <code>!is.na()</code></strong></h2>
<p>Filter based on a specific variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(Sex))       <span class="co"># keep NAs by variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id  Sex Age Renting
1 103 &lt;NA&gt;  40    &lt;NA&gt;</code></pre>
</div>
</div>
<p>But your goal may likely be to keep everything that is not <code>NA</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sex))      <span class="co"># remove NAs by variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 104     man  44      no
5 100    male  25     yes
6 105 neither  40     yes</code></pre>
</div>
</div>
<p>And filter step-by-step for each variable using <code>|&gt;</code> and separate function calls:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sex)) <span class="sc">|&gt;</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Renting))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 102    Male  27     yes
3 104     man  44      no
4 100    male  25     yes
5 105 neither  40     yes</code></pre>
</div>
</div>
<p>So why use separate lines of code if you can use <code>&amp;</code> all in one line? One reason is that separate function calls written as separate lines of code make code inclusion/exclusion extremely easy.</p>
<p>Comment out what you do not want using <code>#</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(!is.na(Sex)) |&gt;</span></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Renting))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 102    Male  27     yes
3 104     man  44      no
4 100    male  25     yes
5 105 neither  40     yes</code></pre>
</div>
</div>
</section>
<section id="filter-using-complete.cases" class="level2">
<h2 class="anchored" data-anchor-id="filter-using-complete.cases"><strong>Filter using <code>complete.cases()</code></strong></h2>
<p>The <code>complete.cases()</code> function returns a logical vector for which <code>TRUE</code> reflects the row has complete information and no missing cases. Using <code>complete.cases()</code> along with <code>filter()</code>, you would retain all rows <code>TRUE</code> rows.</p>
<p>There is a caveat, however, which is that you will need to pipe the data frame with <strong>{magrittrs}</strong> <code>%&gt;%</code> piping operator. And this involves passing <code>.</code> as the argument to the <code>.data</code> parameter of <code>filter()</code> (the first parameter).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">%&gt;%</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="at">.data =</span> ., <span class="fu">complete.cases</span>(.))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 102    Male  27     yes
3 104     man  44      no
4 100    male  25     yes
5 105 neither  40     yes</code></pre>
</div>
</div>
<p>If you use <code>|&gt;</code>, you will get an error:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="at">.data =</span> ., <span class="fu">complete.cases</span>(.))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A way around this is to create your own function in a <code>.R</code> script and add it to <code>/src/functions</code>. We can name <code>filter_complete_cases</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>filter_complete_cases <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete.cases</span>(dplyr<span class="sc">::</span><span class="fu">cur_data</span>())</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And then pipe using <code>|&gt;</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">filter_complete_cases</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `filter()`.
ℹ In argument: `filter_complete_cases()`.
Caused by warning:
! `cur_data()` was deprecated in dplyr 1.1.0.
ℹ Please use `pick()` instead.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 102    Male  27     yes
3 104     man  44      no
4 100    male  25     yes
5 105 neither  40     yes</code></pre>
</div>
</div>
<p>You choose your method.</p>
</section>
<section id="removing-duplicate-rows-using-distinct" class="level2">
<h2 class="anchored" data-anchor-id="removing-duplicate-rows-using-distinct"><strong>Removing duplicate rows using <code>distinct()</code></strong></h2>
<p>We will examine some other filtering methods that do not use <code>filter()</code> specifically but that which perform filtering operations.</p>
<ul>
<li><code>dplyr::distinct()</code>: remove duplicate rows</li>
<li><code>dplyr::distinct(., column)</code>: remove duplicate rows by specific column</li>
<li><code>na.omit()</code>: remove any row with <code>NA</code>’s (missing values)</li>
</ul>
<p>Let’s use the simple <code>DAT</code> data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>DAT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>the_file <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"%20"</span>, <span class="fu">paste0</span>(<span class="fu">get_url_for_module_setup</span>(), <span class="st">"R Basics/"</span>, <span class="st">"vectors_and_data_frame_basics.html"</span>))</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co">#https://gabrielcook.xyz/dataviz24/modules_setup/R%20Basics/vectors_and_data_frame_basics.html</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember that data frames are composed of rows and columns. As <a href="https://gabrielcook.xyz/dataviz24/modules_setup/R%20Basics/vectors_and_data_frame_basics.html">discussed previously</a>) we can subset in <code>base R</code> to illustrate a point.</p>
<p>Row 1, all columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>DAT[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id  Sex Age Renting
1 100 male  25     yes</code></pre>
</div>
</div>
<p>Row 6, all columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>DAT[<span class="dv">6</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id  Sex Age Renting
6 100 male  25     yes</code></pre>
</div>
</div>
<p>Notice that rows 1 and 6 are the same person (e.g., <code>Id</code>) and have exactly the same data for all variables. If we compare the two logically, we will confirm that all is <code>TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>DAT[<span class="dv">1</span>,] <span class="sc">==</span> DAT[<span class="dv">6</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Id  Sex  Age Renting
1 TRUE TRUE TRUE    TRUE</code></pre>
</div>
</div>
<p>You clearly <strong>do not</strong> want duplicates of data. So let’s just remove any rows that are identical using <code>distinct()</code></p>
<section id="removing-duplicates-across-all-variables" class="level3">
<h3 class="anchored" data-anchor-id="removing-duplicates-across-all-variables"><strong>Removing Duplicates Across All Variables</strong></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()       <span class="co"># Remove exact duplicates across all columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 105 neither  40     yes</code></pre>
</div>
</div>
<p>If you know each row is unique based on a variable in the data frame, you can also use <code>distinct()</code> to remove duplicates for a specific variable. Make sure that this variable specification is actually one that you would not want duplicates of.</p>
</section>
<section id="removing-duplicates-based-on-a-variable" class="level3">
<h3 class="anchored" data-anchor-id="removing-duplicates-based-on-a-variable"><strong>Removing Duplicates Based on a Variable</strong></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span>           </span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Id)     <span class="co">#  Remove duplicates by variable; passes unique values for data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id
1 100
2 101
3 102
4 103
5 104
6 105</code></pre>
</div>
</div>
<p>But this function simply returns the unique values in <code>Id</code>. To retain the variables, set <code>.keep_all = TRUE</code>. If you want to remove duplicates and assign the cleaned data frame to an object, you would likely want to keep all of your variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span>             </span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Id, </span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">.keep_all =</span> T</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 105 neither  40     yes</code></pre>
</div>
</div>
<p>Notice, however, this only removed the last instance or <code>Id == 100</code>. Which row to include is a judgment call. The first, the last, neither, the average? Is there a correct answer?</p>
</section>
</section>
</section>
<section id="the-data-manipulation-workflow-putting-it-all-together" class="level1">
<h1><strong>The Data Manipulation Workflow: Putting It All Together</strong></h1>
<p>Of course, all of these functions can be paired with <code>select()</code>, <code>mutate()</code>, <code>filter()</code>, etc. Here is the data manipulation workflow.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>dataframe <span class="sc">|&gt;</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(...) <span class="sc">|&gt;</span>     <span class="co"># select variables of interest</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(...) <span class="sc">|&gt;</span>     <span class="co"># then create new variables</span></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(...) <span class="sc">|&gt;</span>     <span class="co"># then filter by rows</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(...) <span class="sc">|&gt;</span>   <span class="co"># then group for subsetting</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(...)     <span class="co"># then summarize</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="many-more-use-case-examples-optional" class="level1">
<h1><strong>Many More Use-Case Examples (Optional)</strong></h1>
<section id="filter-cases-using" class="level2">
<h2 class="anchored" data-anchor-id="filter-cases-using"><em>Filter Cases using <code>==</code></em></h2>
<p>Filter rows for which the <code>Sex</code> variable is equal to the string <code>'female'</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'female'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 101 female  33    &lt;NA&gt;</code></pre>
</div>
</div>
<p>Filter rows for which the <code>Sex</code> variable is not equal to the string <code>'female'</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">!=</span> <span class="st">'female'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 102    Male  27     yes
3 104     man  44      no
4 100    male  25     yes
5 105 neither  40     yes</code></pre>
</div>
</div>
<p>Filter rows for which the <code>Sex</code> variable is equal to the string <code>'female'</code> <strong>AND</strong> <code>Age</code> is greater than the numeric 27:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'female'</span> <span class="sc">&amp;</span> Age <span class="sc">&gt;</span> <span class="dv">27</span>) <span class="co"># this "AND" that</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 101 female  33    &lt;NA&gt;</code></pre>
</div>
</div>
<p>Filter rows for which the <code>Sex</code> variable is equal to the string <code>'female'</code> <strong>OR</strong> <code>Age</code> is greater than the numeric 27:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'female'</span> <span class="sc">|</span> Age <span class="sc">&gt;</span> <span class="dv">27</span>) <span class="co"># this "OR" that</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 101  female  33    &lt;NA&gt;
2 103    &lt;NA&gt;  40    &lt;NA&gt;
3 104     man  44      no
4 105 neither  40     yes</code></pre>
</div>
</div>
<p>A cleaner method involves separate lines of code. Although cleaner, this will not allow the “OR” option because the data frame that is returned from the first <code>filter()</code> is passed to the second <code>filter()</code> and all cases other than <code>"female"</code> have already been removed from the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'female'</span>) <span class="sc">|&gt;</span>    <span class="co"># keep female (and add another pipe)</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> <span class="dv">27</span>)             <span class="co"># keep only those equal to or older than 27</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 101 female  33    &lt;NA&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="filtering-cases-by-value" class="level1">
<h1><strong>Filtering Cases by Value</strong></h1>
<section id="filter-by-and-or-or" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-and-or-or"><strong>Filter by <code>&lt;</code> and <code>&gt;</code> or <code>&lt;=</code> or <code>&gt;=</code></strong></h2>
<p>Keep those less than:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&lt;</span> <span class="dv">40</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 102   Male  27     yes
4 100   male  25     yes</code></pre>
</div>
</div>
<p>Keep older than:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;</span> <span class="dv">40</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id Sex Age Renting
1 104 man  44      no</code></pre>
</div>
</div>
<p>Keep equal to or older than:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> <span class="dv">40</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 103    &lt;NA&gt;  40    &lt;NA&gt;
2 104     man  44      no
3 105 neither  40     yes</code></pre>
</div>
</div>
</section>
<section id="filter-cases-by-conditional-x-or-y-using-operator" class="level2">
<h2 class="anchored" data-anchor-id="filter-cases-by-conditional-x-or-y-using-operator"><strong>Filter Cases by Conditional X <em>or</em> Y Using <code>|</code> Operator…</strong></h2>
<p>Using the “OR” operator, <code>|</code>, cases can be included if “this” OR “that” condition.</p>
<p>Filter numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">==</span> <span class="dv">25</span> <span class="sc">|</span> Age <span class="sc">==</span> <span class="dv">40</span>)    <span class="co"># filter out numeric values IN a range</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 103    &lt;NA&gt;  40    &lt;NA&gt;
3 100    male  25     yes
4 105 neither  40     yes</code></pre>
</div>
</div>
<p>Filter characters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'male'</span> <span class="sc">|</span> Sex <span class="sc">==</span> <span class="st">'female'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 100   male  25     yes</code></pre>
</div>
</div>
<p>Although <code>dplyr::filter(sex %in% c('male', 'female'))</code> would be easier.</p>
<p>Filter rows of variables of both types:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">'male'</span> <span class="sc">|</span> Age <span class="sc">==</span> <span class="dv">27</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id  Sex Age Renting
1 100 male  25     yes
2 102 Male  27     yes
3 100 male  25     yes</code></pre>
</div>
</div>
</section>
<section id="filter-cases-between-values-with-between" class="level2">
<h2 class="anchored" data-anchor-id="filter-cases-between-values-with-between"><strong>Filter Cases Between Values with <code>between()</code></strong></h2>
<p>Between ages 25 and 33:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(Age, <span class="dv">27</span>, <span class="dv">33</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 101 female  33    &lt;NA&gt;
2 102   Male  27     yes</code></pre>
</div>
</div>
</section>
<section id="filter-by-range-using-the-in-operator-this-is-in-meaning-in" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-range-using-the-in-operator-this-is-in-meaning-in"><strong>Filter by range using the <code>%in%</code> operator (this is IN meaning in)</strong></h2>
<p>Though less flexible than using <code>between()</code>, <code>%in%</code> may be easier to remember:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">%in%</span> <span class="dv">20</span><span class="sc">:</span><span class="dv">43</span>)    <span class="co"># filter out numeric values IN a range</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 100    male  25     yes
6 105 neither  40     yes</code></pre>
</div>
</div>
<p>One’s age is in the range from 20 through 43.</p>
<p>If a vector object is already defined (e.g., <code>my_levels = c('male', 'female')</code>), you can use that for filtering also. Such approaches are useful when data manipulation involves reusing a reference as it simplifies coding and reduces errors because the specification is defined only once.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>my_levels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'male'</span>, <span class="st">'female'</span>)</span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Sex <span class="sc">%in%</span> my_levels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 100   male  25     yes</code></pre>
</div>
</div>
</section>
<section id="filter-by-exclusion" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-exclusion"><strong>Filter by exclusion</strong></h2>
<p>When inclusion of variables is inappropriate, exclusion of them may be useful. The <code>!</code> operator means “NOT” in <code>R</code> so you can use that to accomplish the opposite of the statement. For example, <code>dplyr::filter(., !sex %in% c('male', NA))</code> will “filter the data frame to include rows in the <code>sex</code> column for which the value is NOT in the vector”.</p>
<p>Exclude rows in the <code>Sex</code> variable that are <code>NA</code> or <code>'male'</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Sex <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'male'</span>, <span class="cn">NA</span>))  <span class="co"># keep only if NOT in vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 101  female  33    &lt;NA&gt;
2 102    Male  27     yes
3 104     man  44      no
4 105 neither  40     yes</code></pre>
</div>
</div>
<p>Exclude rows in the <code>Sex</code> variable that are <code>Men</code> or <code>'male'</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Sex <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'male'</span>, <span class="st">'Men'</span>))  <span class="co"># keep only if NOT in vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 101  female  33    &lt;NA&gt;
2 102    Male  27     yes
3 103    &lt;NA&gt;  40    &lt;NA&gt;
4 104     man  44      no
5 105 neither  40     yes</code></pre>
</div>
</div>
</section>
<section id="filter-by-conditional-x-and-y-using-operator" class="level2">
<h2 class="anchored" data-anchor-id="filter-by-conditional-x-and-y-using-operator"><em>Filter by conditional X and Y using <code>&amp;</code> operator…</em></h2>
<p>By range:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Id <span class="sc">&gt;=</span> <span class="dv">102</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span> <span class="dv">43</span>)    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 102    Male  27     yes
2 103    &lt;NA&gt;  40    &lt;NA&gt;
3 105 neither  40     yes</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;=</span> <span class="dv">43</span>)    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    Male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 100    male  25     yes
6 105 neither  40     yes</code></pre>
</div>
</div>
<p>Note: Age 20:43 won’t work. Can you figure out why?</p>
</section>
</section>
<section id="filter-cases-containing-characters-using-stringrstr_detect-and-in" class="level1">
<h1><strong>Filter Cases Containing Characters Using <code>stringr::str_detect()</code> and <code>%in%</code>:</strong></h1>
<p>If you want to filter cases that contain certain characters, unfortunately, you cannot use <code>contains()</code> as you would for variable names. For matching characters in levels of variables, you’ll need something like <code>stringr::str_detect()</code> or <code>grepl()</code>.</p>
<ul>
<li><code>stringr::str_detect()</code>: returns matching conditions</li>
</ul>
<p>The example below uses <code>str_detect()</code> to detect the presence of a character match and returns a logic vector with <code>TRUE</code>s for matching cases. When paired with <code>filter()</code>, the data frame is filtered by to contains cases that match the pattern for the variable.</p>
<p>Example: <code>stringr::str_detect(my_variable, "pattern")</code>:</p>
<p>Let’s look for levels of <code>Sex</code> for which <code>"ma"</code> is detected.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span> </span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Sex, <span class="st">"ma"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 104    man  44      no
4 100   male  25     yes</code></pre>
</div>
</div>
<p>But the case for which <code>Sex = Male</code> is now missing. This is because <code>stringr::str_detect()</code> is a case-sensitive pattern match.</p>
<p>You can fix this is a couple ways:</p>
<ol type="1">
<li>make the cases in <code>Sex</code> all lower case to <code>mutate()</code> the fix or</li>
<li>to wrap <code>Sex</code> in <code>tolower()</code> to make cases lowercase.</li>
</ol>
<p>The first option might be better if you want to fix the problem in the data frame.</p>
<p>Other casing functions are:</p>
<ul>
<li><code>tolower()</code>: returns lower case of string; see also <code>stringr::str_to_lower()</code></li>
<li><code>toupper()</code>: returns upper case of string; see also <code>stringr::str_to_upper()</code></li>
<li><code>tools::toTitleCase()</code>: returns Title Case (capitalize first letter of string)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">tolower</span>(Sex), <span class="st">"ma"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 102   Male  27     yes
4 104    man  44      no
5 100   male  25     yes</code></pre>
</div>
</div>
<p>For some, reading this code may be difficult. In order to understand the code, you need to read it inside out like slices of an onion. First understand the first function as the returned value is passed to the next function and so forth.</p>
<p>For example, elements of the <code>Sex</code> vector are converted to lower case and returned using <code>tolower()</code>. We can demonstrate this using only the vector from the data frame using the <code>$</code> operator, <code>DAT$Sex</code>.</p>
<p>The initial vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>DAT<span class="sc">$</span>Sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "male"    "female"  "Male"    NA        "man"     "male"    "neither"</code></pre>
</div>
</div>
<p>To lowercase:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(DAT<span class="sc">$</span>Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "male"    "female"  "male"    NA        "man"     "male"    "neither"</code></pre>
</div>
</div>
<p>Next, <code>stringr::str_detect()</code> will return a vector of <code>TRUE</code> or <code>FALSE</code> for all element positions of <code>DAT$Sex</code> for which the (now lowercase) string matches <code>"ma"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_detect</span>(<span class="fu">tolower</span>(DAT<span class="sc">$</span>Sex), <span class="st">"ma"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE    NA  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<p>Another approach would be to perform the steps in pieces by first mutating the data frame so that elements in the <code>Sex</code> vector are converted to lowercase and then pipe that mutated data from to <code>filter()</code>.</p>
<p>Briefly, we will introduce <code>dplyr::mutate()</code> to accomplish this goal. <code>mutate()</code> is used to add, update, etc. variables in a data frame or tibble.</p>
<p>Mutate <code>Sex</code> using <code>mutate()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">tolower</span>(Sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id     Sex Age Renting
1 100    male  25     yes
2 101  female  33    &lt;NA&gt;
3 102    male  27     yes
4 103    &lt;NA&gt;  40    &lt;NA&gt;
5 104     man  44      no
6 100    male  25     yes
7 105 neither  40     yes</code></pre>
</div>
</div>
<p>Now <code>mutate()</code> and <code>|&gt;</code> that mutated data frame to <code>filter()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">tolower</span>(Sex)) <span class="sc">|&gt;</span></span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Sex, <span class="st">"ma"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   male  25     yes
2 101 female  33    &lt;NA&gt;
3 102   male  27     yes
4 104    man  44      no
5 100   male  25     yes</code></pre>
</div>
</div>
<p>Pairing this piping approach with <code>toTitleCase()</code> may be better as only the first letter will be capitalized and you are looking for “Ma”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> tools<span class="sc">::</span><span class="fu">toTitleCase</span>(Sex)) <span class="sc">|&gt;</span></span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Sex, <span class="st">"Ma"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id  Sex Age Renting
1 100 Male  25     yes
2 102 Male  27     yes
3 104  Man  44      no
4 100 Male  25     yes</code></pre>
</div>
</div>
<p>But notice the <code>male</code> and <code>man</code> issue is still a problem.</p>
<p>So what are the unique elements in <code>DAT$Sex</code>? Your friend here is <code>unique()</code>. And maybe you are too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(DAT<span class="sc">$</span>Sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "male"    "female"  "Male"    NA        "man"     "neither"</code></pre>
</div>
</div>
<p>You can hard code a fix using <code>%in%</code> and <code>case_when()</code>. <code>case_when()</code> is <strong>{dplyr}</strong>’s solution for multiple-case conditional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">tolower</span>(Sex), <span class="co"># convert to lowercase first</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Sex =</span> <span class="fu">case_when</span>(    <span class="co"># then recode cases when matched</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"male"</span>, <span class="st">"man"</span>) <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"woman"</span>) <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true" tabindex="-1"></a>         ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   Male  25     yes
2 101 Female  33    &lt;NA&gt;
3 102   Male  27     yes
4 103   &lt;NA&gt;  40    &lt;NA&gt;
5 104   Male  44      no
6 100   Male  25     yes
7 105   &lt;NA&gt;  40     yes</code></pre>
</div>
</div>
<p>For a more flexible fix, you can use <code>str_detect()</code>:</p>
<p>BUT beware that the order of operations matters with this approach. Because the string “female” contains characters “ma”, you could accidentally recode all “female” cases to “male” if you perform the <code>case_when()</code> conversion on “male” first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>DAT <span class="sc">|&gt;</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">tolower</span>(Sex),   <span class="co"># convert first</span></span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Sex =</span> <span class="fu">case_when</span>(      <span class="co"># then recode</span></span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a>           stringr<span class="sc">::</span><span class="fu">str_detect</span>(Sex, <span class="st">"fe"</span>) <span class="sc">~</span> <span class="st">"Female"</span>,</span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true" tabindex="-1"></a>           stringr<span class="sc">::</span><span class="fu">str_detect</span>(Sex, <span class="st">"ma"</span>) <span class="sc">~</span> <span class="st">"Male"</span>,</span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true" tabindex="-1"></a>         ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Id    Sex Age Renting
1 100   Male  25     yes
2 101 Female  33    &lt;NA&gt;
3 102   Male  27     yes
4 103   &lt;NA&gt;  40    &lt;NA&gt;
5 104   Male  44      no
6 100   Male  25     yes
7 105   &lt;NA&gt;  40     yes</code></pre>
</div>
</div>
<p>Note that conditions in not declared in <code>case_when()</code> will be recoded as <code>NA</code>, which is what happens for <code>"neither"</code>. Make sure to include all ways you wish you recode cases.</p>
</section>
<section id="session-information" class="level1">
<h1><strong>Session Information</strong></h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.4.1 (2024-06-14 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 11 x64 (build 22631)

Matrix products: default


locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] tidyselect_1.2.1  htmltools_0.5.8.1 DT_0.33           vroom_1.6.5      
 [5] lubridate_1.9.3   forcats_1.0.0     stringr_1.5.1     dplyr_1.1.4      
 [9] purrr_1.0.2       readr_2.1.5       tidyr_1.3.1       tibble_3.2.1     
[13] ggplot2_3.5.1     tidyverse_2.0.0  

loaded via a namespace (and not attached):
 [1] bit_4.0.5         gtable_0.3.5      jsonlite_1.8.8    crayon_1.5.3     
 [5] compiler_4.4.1    scales_1.3.0      yaml_2.3.10       fastmap_1.2.0    
 [9] here_1.0.1        R6_2.5.1          generics_0.1.3    knitr_1.47       
[13] htmlwidgets_1.6.4 munsell_0.5.1     rprojroot_2.0.4   tzdb_0.4.0       
[17] pillar_1.9.0      R.utils_2.12.3    rlang_1.1.4       utf8_1.2.4       
[21] stringi_1.8.4     xfun_0.45         bit64_4.0.5       timechange_0.3.0 
[25] cli_3.6.3         withr_3.0.1       magrittr_2.0.3    digest_0.6.36    
[29] grid_4.4.1        rstudioapi_0.16.0 hms_1.1.3         lifecycle_1.0.4  
[33] R.methodsS3_1.8.2 R.oo_1.26.0       vctrs_0.6.5       evaluate_0.24.0  
[37] glue_1.7.0        fansi_1.0.6       colorspace_2.1-0  rmarkdown_2.27   
[41] tools_4.4.1       pkgconfig_2.0.3  </code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>